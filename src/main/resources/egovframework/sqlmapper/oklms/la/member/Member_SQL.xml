<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper   PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<!--
  ~ *******************************************************************************
  ~  * COPYRIGHT(C) 2016 SMART INFORMATION TECHNOLOGY. ALL RIGHTS RESERVED.
  ~  * This software is the proprietary information of SMART INFORMATION TECHNOLOGY..
  ~  *
  ~  * Revision History
  ~  * Author   Date            Description
  ~  * ======   =========      ====================================
  ~  * 이진근    2016. 12. 01 오전 11:00         First Draft.
  ~  *
  ~  ******************************************************************************* 
  -->

<mapper namespace="kr.co.gocle.oklms.la.member.service.impl.MemberMapper">

	<!-- <resultMap id="member-result" type="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<result column="MEM_SEQ" 			property="memSeq" />
		<result column="MEM_ID" 			property="memId" />
		<result column="MEM_TYPE" 			property="memType" />
		<result column="MEM_NAME" 			property="memName" />
		<result column="PWD_QUEST" 			property="pwdQuest" />
		<result column="SEX" 			property="sex" />
		<result column="MEM_NAME_ENG" 			property="memNameEng" />
		<result column="MEM_BIRTH" 			property="memBirth" />
		<result column="PWD_QUEST_ANS" 			property="pwdQuestAns" />
		<result column="MEM_PASSWORD" 			property="memPassword" />
		<result column="EMAIL" 			property="email" />
		<result column="MEM_REGI_NO" 			property="memRegiNo" />
		<result column="ZIP_CODE" 			property="zipCode" />
		<result column="ADDRESS" 			property="address" />
		<result column="ADDRESS_DTL" 			property="addressDtl" />
		<result column="TEL_NO1" 			property="telNo1" />
		<result column="TEL_NO2" 			property="telNo2" />
		<result column="TEL_NO3" 			property="telNo3" />
		<result column="HP_NO1" 			property="hpNo1" />
		<result column="HP_NO2" 			property="hpNo2" />
		<result column="HP_NO3" 			property="hpNo3" />
		<result column="NEWSLETTER_YN" 			property="newsletterYn" />
		<result column="PHOTO_FILE_PATH" 			property="photoFilePath" />
		<result column="WORKING_PLACE" 			property="workingPlace" />
		<result column="SCHOLARSHIP" 			property="scholarship" />
		<result column="SECEDE_REASON" 			property="secedeReason" />
		<result column="RELATION_FIELD" 			property="relationField" />
		<result column="CAREER" 			property="career" />
		<result column="TITLE" 			property="title" />
		<result column="AUTH_GROUP_ID" 			property="authGroupId" />
		<result column="BNDL_REG_YN" 			property="bndlRegYn" />
		<result column="LOGIN_CNT" 			property="loginCnt" />
		<result column="SCSN_YN" 			property="scsnYn" />
		<result column="MAJR" 			property="majr" />
		<result column="RECEIVE_MAIL_YN" 			property="receiveMailYn" />
		<result column="RECEIVE_SMS_YN" 			property="receiveSmsYn" />
		<result column="FOREIGN_YN" 			property="foreignYn" />
		<result column="NAMECHECK_YN" 			property="namecheckYn" />
		<result column="NATION_CODE" 			property="nationCode" />
		<result column="COMPANY_ID" 			property="companyId" />
		<result column="G_PIN_YN" 			property="gPinYn" />
		<result column="G_PIN_KEY1" 			property="gPinKey1" />
		<result column="G_PIN_KEY2" 			property="gPinKey2" />
		<result column="MEM_DIV" 			property="memDiv" />
		<result column="SCHOOL_SEQ" 			property="schoolSeq" />
		<result column="TUTOR_CLAUSE_AGREE_YN" 			property="tutorClauseAgreeYn" />
		<result column="ASP_ID" 			property="aspId" />
		<result column="AGREE_YN" 			property="agreeYn" />
		<result column="NONAGE_YN" 			property="nonageYn" />
		<result column="DELETE_YN" 			property="deleteYn" />
		<result column="INSERT_DATE" 			property="insertDate" />
		<result column="INSERT_USER" 			property="insertUser" />
		<result column="UPDATE_DATE" 			property="updateDate" />
		<result column="UPDATE_USER" 			property="updateUser" />
		<result column="CERTI_NO" 			property="certiNo" />
		<result column="CERTI_CHARACTER" 			property="certiCharacter" />
		<result column="CERTI_YN" 			property="certiYn" />
		<result column="CERTI_ATTEMPT_CNT" 			property="certiAttemptCnt" />
		<result column="COMP_NM" 			property="compNm" />
		<result column="DEPT_NM" 			property="deptNm" />
		<result column="DUTY_NM" 			property="dutyNm" />
		<result column="REMK" 			property="remk" />
		<result column="WRONG_REGI_NO" 			property="wrongRegiNo" />
		<result column="ORG_PW_NULL" 			property="orgPwNull" />
		<result column="ORG_MEM_ID" 			property="orgMemId" />
		<result column="LAST_LOGIN_YMD" 			property="lastLoginYmd" />
		<result column="LAST_PW_UPDT_YMD" 			property="lastPwUpdtYmd" />
		<result column="PW_ERR_NUMBER_TIMES" 			property="pwErrNumberTimes" />
		<result column="USE_EXPIRE_YMD" 			property="useExpireYmd" />
		
	</resultMap>
	 -->
	
	<sql id="listMember-where">
	     <choose>
            <when test="searchName != null and searchName != ''">
                	<if test="searchName eq 'NAME'">
                		<if test="searchWord != null and searchWord != ''">
                			AND CM.MEM_NAME LIKE '%' || #{searchWord  } || '%'  
                		</if>
                	</if>
                	<if test="searchName eq 'ID'">
                		<if test="searchWord != null and searchWord != ''">
                			AND CM.MEM_ID LIKE '%' || #{searchWord  } || '%'   
                		</if>
                	</if>
            </when>
            <otherwise>
            	<if test="searchWord != null and searchWord != ''">
            		AND ( CM.MEM_NAME LIKE '%' || #{searchWord  } || '%' OR CM.MEM_ID LIKE '%' || #{searchWord  } || '%' )
            	</if>
            </otherwise>
        </choose>
        
		<!-- 조회 조건값 -->
		        <!--<if test="searchName != null and searchName != ''">AND CM.MEM_NAME LIKE '%' ||  #{searchName} || '%'</if>-->
				<!-- <if test="memSeq != null and memSeq != ''">	AND CM.MEM_SEQ 	= #{memSeq}		 </if> -->
				<if test="memId != null and memId != ''">	AND CM.MEM_ID 	= #{memId}		 </if>
				<!-- <if test="memType != null and memType != ''">	AND CM.MEM_TYPE 	= #{memType}		 </if> -->
				<!-- <if test="memName != null and memName != ''">	AND CM.MEM_NAME 	= #{memName}		 </if> -->
				<!-- <if test="pwdQuest != null and pwdQuest != ''">	AND CM.PWD_QUEST 	= #{pwdQuest}		 </if> -->
				<!-- <if test="sex != null and sex != ''">	AND CM.SEX 	= #{sex}		 </if> -->
				<!-- <if test="memNameEng != null and memNameEng != ''">	AND CM.MEM_NAME_ENG 	= #{memNameEng}		 </if> -->
				<!-- <if test="memBirth != null and memBirth != ''">	AND CM.MEM_BIRTH 	= #{memBirth}		 </if> -->
				<!-- <if test="pwdQuestAns != null and pwdQuestAns != ''">	AND CM.PWD_QUEST_ANS 	= #{pwdQuestAns}		 </if> -->
				<!-- <if test="memPassword != null and memPassword != ''">	AND CM.MEM_PASSWORD 	= #{memPassword}		 </if> -->
				<!-- <if test="email != null and email != ''">	AND CM.EMAIL 	= #{email}		 </if> -->
				<!-- <if test="memRegiNo != null and memRegiNo != ''">	AND CM.MEM_REGI_NO 	= #{memRegiNo}		 </if> -->
				<!-- <if test="zipCode != null and zipCode != ''">	AND CM.ZIP_CODE 	= #{zipCode}		 </if> -->
				<!-- <if test="address != null and address != ''">	AND CM.ADDRESS 	= #{address}		 </if> -->
				<!-- <if test="addressDtl != null and addressDtl != ''">	AND CM.ADDRESS_DTL 	= #{addressDtl}		 </if> -->
				<!-- <if test="telNo1 != null and telNo1 != ''">	AND CM.TEL_NO1 	= #{telNo1}		 </if> -->
				<!-- <if test="telNo2 != null and telNo2 != ''">	AND CM.TEL_NO2 	= #{telNo2}		 </if> -->
				<!-- <if test="telNo3 != null and telNo3 != ''">	AND CM.TEL_NO3 	= #{telNo3}		 </if> -->
				<!-- <if test="hpNo1 != null and hpNo1 != ''">	AND CM.HP_NO1 	= #{hpNo1}		 </if> -->
				<!-- <if test="hpNo2 != null and hpNo2 != ''">	AND CM.HP_NO2 	= #{hpNo2}		 </if> -->
				<!-- <if test="hpNo3 != null and hpNo3 != ''">	AND CM.HP_NO3 	= #{hpNo3}		 </if> -->
				<!-- <if test="newsletterYn != null and newsletterYn != ''">	AND CM.NEWSLETTER_YN 	= #{newsletterYn}		 </if> -->
				<!-- <if test="photoFilePath != null and photoFilePath != ''">	AND CM.PHOTO_FILE_PATH 	= #{photoFilePath}		 </if> -->
				<!-- <if test="workingPlace != null and workingPlace != ''">	AND CM.WORKING_PLACE 	= #{workingPlace}		 </if> -->
				<!-- <if test="scholarship != null and scholarship != ''">	AND CM.SCHOLARSHIP 	= #{scholarship}		 </if> -->
				<!-- <if test="secedeReason != null and secedeReason != ''">	AND CM.SECEDE_REASON 	= #{secedeReason}		 </if> -->
				<!-- <if test="relationField != null and relationField != ''">	AND CM.RELATION_FIELD 	= #{relationField}		 </if> -->
				<!-- <if test="career != null and career != ''">	AND CM.CAREER 	= #{career}		 </if> -->
				<!-- <if test="title != null and title != ''">	AND CM.TITLE 	= #{title}		 </if> -->
				<!-- <if test="authGroupId != null and authGroupId != ''">	AND CM.AUTH_GROUP_ID 	= #{authGroupId}		 </if> -->
				<if test="bndlRegYn != null and bndlRegYn != ''">	AND CM.BNDL_REG_YN 	= #{bndlRegYn}		 </if>
				<!-- <if test="loginCnt != null and loginCnt != ''">	AND CM.LOGIN_CNT 	= #{loginCnt}		 </if> -->
				<!--<if test="scsnYn != null and scsnYn != ''">	AND CM.SCSN_YN 	= #{scsnYn}		 </if>-->
				<!-- <if test="majr != null and majr != ''">	AND CM.MAJR 	= #{majr}		 </if> -->
				<!-- <if test="receiveMailYn != null and receiveMailYn != ''">	AND CM.RECEIVE_MAIL_YN 	= #{receiveMailYn}		 </if> -->
				<!-- <if test="receiveSmsYn != null and receiveSmsYn != ''">	AND CM.RECEIVE_SMS_YN 	= #{receiveSmsYn}		 </if> -->
				<!-- <if test="foreignYn != null and foreignYn != ''">	AND CM.FOREIGN_YN 	= #{foreignYn}		 </if> -->
				<!-- <if test="namecheckYn != null and namecheckYn != ''">	AND CM.NAMECHECK_YN 	= #{namecheckYn}		 </if> -->
				<!-- <if test="nationCode != null and nationCode != ''">	AND CM.NATION_CODE 	= #{nationCode}		 </if> -->
				<!-- <if test="companyId != null and companyId != ''">	AND CM.COMPANY_ID 	= #{companyId}		 </if> -->
				<!-- <if test="gPinYn != null and gPinYn != ''">	AND CM.G_PIN_YN 	= #{gPinYn}		 </if> -->
				<!-- <if test="gPinKey1 != null and gPinKey1 != ''">	AND CM.G_PIN_KEY1 	= #{gPinKey1}		 </if> -->
				<!-- <if test="gPinKey2 != null and gPinKey2 != ''">	AND CM.G_PIN_KEY2 	= #{gPinKey2}		 </if> -->
				<!-- <if test="memDiv != null and memDiv != ''">	AND CM.MEM_DIV 	= #{memDiv}		 </if> -->
				<!-- <if test="schoolSeq != null and schoolSeq != ''">	AND CM.SCHOOL_SEQ 	= #{schoolSeq}		 </if> -->
				<!-- <if test="tutorClauseAgreeYn != null and tutorClauseAgreeYn != ''">	AND CM.TUTOR_CLAUSE_AGREE_YN 	= #{tutorClauseAgreeYn}		 </if> -->
				<!-- <if test="aspId != null and aspId != ''">	AND CM.ASP_ID 	= #{aspId}		 </if> -->
				<!-- <if test="agreeYn != null and agreeYn != ''">	AND CM.AGREE_YN 	= #{agreeYn}		 </if> -->
				<!-- <if test="nonageYn != null and nonageYn != ''">	AND CM.NONAGE_YN 	= #{nonageYn}		 </if> -->
				<if test="deleteYn != null and deleteYn != ''">	AND CM.DELETE_YN 	= #{deleteYn}		 </if>
				AND CM.DELETE_YN = 'N'
				<!-- <if test="insertDate != null and insertDate != ''">	AND CM.INSERT_DATE 	= #{insertDate}		 </if> -->
				<!-- <if test="insertUser != null and insertUser != ''">	AND CM.INSERT_USER 	= #{insertUser}		 </if> -->
				<!-- <if test="updateDate != null and updateDate != ''">	AND CM.UPDATE_DATE 	= #{updateDate}		 </if> -->
				<!-- <if test="updateUser != null and updateUser != ''">	AND CM.UPDATE_USER 	= #{updateUser}		 </if> -->
				<!-- <if test="certiNo != null and certiNo != ''">	AND CM.CERTI_NO 	= #{certiNo}		 </if> -->
				<!-- <if test="certiCharacter != null and certiCharacter != ''">	AND CM.CERTI_CHARACTER 	= #{certiCharacter}		 </if> -->
				<!-- <if test="certiYn != null and certiYn != ''">	AND CM.CERTI_YN 	= #{certiYn}		 </if> -->
				<!-- <if test="certiAttemptCnt != null and certiAttemptCnt != ''">	AND CM.CERTI_ATTEMPT_CNT 	= #{certiAttemptCnt}		 </if> -->
				<!-- <if test="compNm != null and compNm != ''">	AND CM.COMP_NM 	= #{compNm}		 </if> -->
				<!-- <if test="deptNm != null and deptNm != ''">	AND CM.DEPT_NM 	= #{deptNm}		 </if> -->
				<!-- <if test="dutyNm != null and dutyNm != ''">	AND CM.DUTY_NM 	= #{dutyNm}		 </if> -->
				<!-- <if test="remk != null and remk != ''">	AND CM.REMK 	= #{remk}		 </if> -->
				<!-- <if test="wrongRegiNo != null and wrongRegiNo != ''">	AND CM.WRONG_REGI_NO 	= #{wrongRegiNo}		 </if> -->
				<!-- <if test="orgPwNull != null and orgPwNull != ''">	AND CM.ORG_PW_NULL 	= #{orgPwNull}		 </if> -->
				<!-- <if test="orgMemId != null and orgMemId != ''">	AND CM.ORG_MEM_ID 	= #{orgMemId}		 </if> -->
				<!-- <if test="lastLoginYmd != null and lastLoginYmd != ''">	AND CM.LAST_LOGIN_YMD 	= #{lastLoginYmd}		 </if> -->
				<!-- <if test="lastPwUpdtYmd != null and lastPwUpdtYmd != ''">	AND CM.LAST_PW_UPDT_YMD 	= #{lastPwUpdtYmd}		 </if> -->
				<!-- <if test="pwErrNumberTimes != null and pwErrNumberTimes != ''">	AND CM.PW_ERR_NUMBER_TIMES 	= #{pwErrNumberTimes}		 </if> -->
				<!-- <if test="useExpireYmd != null and useExpireYmd != ''">	AND CM.USE_EXPIRE_YMD 	= #{useExpireYmd}		 </if> -->
        
		<!-- 검색 영역에서의 조건값 -->
				<!-- <if test="searchMemSeq != null and searchMemSeq != ''">	AND CM.MEM_SEQ 	= #{searchMemSeq}		 </if> -->
				<!-- <if test="searchMemId != null and searchMemId != ''">	AND CM.MEM_ID 	= #{searchMemId}		 </if> -->
				<!-- <if test="searchMemType != null and searchMemType != ''">	AND CM.MEM_TYPE 	= #{searchMemType}		 </if> -->
				<if test="searchName != null and searchName != ''">	AND CM.MEM_NAME  LIKE '%' || #{searchName  } || '%'  	 </if>
				<if test="searchMemName != null and searchMemName != ''">	AND CM.MEM_NAME  LIKE '%' || #{searchName  } || '%'  	 </if>
				<!-- <if test="searchPwdQuest != null and searchPwdQuest != ''">	AND CM.PWD_QUEST 	= #{searchPwdQuest}		 </if> -->
				<!-- <if test="searchSex != null and searchSex != ''">	AND CM.SEX 	= #{searchSex}		 </if> -->
				<!-- <if test="searchMemNameEng != null and searchMemNameEng != ''">	AND CM.MEM_NAME_ENG 	= #{searchMemNameEng}		 </if> -->
				<!-- <if test="searchMemBirth != null and searchMemBirth != ''">	AND CM.MEM_BIRTH 	= #{searchMemBirth}		 </if> -->
				<!-- <if test="searchPwdQuestAns != null and searchPwdQuestAns != ''">	AND CM.PWD_QUEST_ANS 	= #{searchPwdQuestAns}		 </if> -->
				<!-- <if test="searchMemPassword != null and searchMemPassword != ''">	AND CM.MEM_PASSWORD 	= #{searchMemPassword}		 </if> -->
				<!-- <if test="searchEmail != null and searchEmail != ''">	AND CM.EMAIL 	= #{searchEmail}		 </if> -->
				<!-- <if test="searchMemRegiNo != null and searchMemRegiNo != ''">	AND CM.MEM_REGI_NO 	= #{searchMemRegiNo}		 </if> -->
				<!-- <if test="searchZipCode != null and searchZipCode != ''">	AND CM.ZIP_CODE 	= #{searchZipCode}		 </if> -->
				<!-- <if test="searchAddress != null and searchAddress != ''">	AND CM.ADDRESS 	= #{searchAddress}		 </if> -->
				<!-- <if test="searchAddressDtl != null and searchAddressDtl != ''">	AND CM.ADDRESS_DTL 	= #{searchAddressDtl}		 </if> -->
				<!-- <if test="searchTelNo1 != null and searchTelNo1 != ''">	AND CM.TEL_NO1 	= #{searchTelNo1}		 </if> -->
				<!-- <if test="searchTelNo2 != null and searchTelNo2 != ''">	AND CM.TEL_NO2 	= #{searchTelNo2}		 </if> -->
				<!-- <if test="searchTelNo3 != null and searchTelNo3 != ''">	AND CM.TEL_NO3 	= #{searchTelNo3}		 </if> -->
				<!-- <if test="searchHpNo1 != null and searchHpNo1 != ''">	AND CM.HP_NO1 	= #{searchHpNo1}		 </if> -->
				<!-- <if test="searchHpNo2 != null and searchHpNo2 != ''">	AND CM.HP_NO2 	= #{searchHpNo2}		 </if> -->
				<!-- <if test="searchHpNo3 != null and searchHpNo3 != ''">	AND CM.HP_NO3 	= #{searchHpNo3}		 </if> -->
				<!-- <if test="searchNewsletterYn != null and searchNewsletterYn != ''">	AND CM.NEWSLETTER_YN 	= #{searchNewsletterYn}		 </if> -->
				<!-- <if test="searchPhotoFilePath != null and searchPhotoFilePath != ''">	AND CM.PHOTO_FILE_PATH 	= #{searchPhotoFilePath}		 </if> -->
				<!-- <if test="searchWorkingPlace != null and searchWorkingPlace != ''">	AND CM.WORKING_PLACE 	= #{searchWorkingPlace}		 </if> -->
				<!-- <if test="searchScholarship != null and searchScholarship != ''">	AND CM.SCHOLARSHIP 	= #{searchScholarship}		 </if> -->
				<!-- <if test="searchSecedeReason != null and searchSecedeReason != ''">	AND CM.SECEDE_REASON 	= #{searchSecedeReason}		 </if> -->
				<!-- <if test="searchRelationField != null and searchRelationField != ''">	AND CM.RELATION_FIELD 	= #{searchRelationField}		 </if> -->
				<!-- <if test="searchCareer != null and searchCareer != ''">	AND CM.CAREER 	= #{searchCareer}		 </if> -->
				<!-- <if test="searchTitle != null and searchTitle != ''">	AND CM.TITLE 	= #{searchTitle}		 </if> -->
				<if test="searchAuthGroupId != null and searchAuthGroupId != ''">	AND CM.AUTH_GROUP_ID 	= #{searchAuthGroupId}		 </if>
				<!-- <if test="searchBndlRegYn != null and searchBndlRegYn != ''">	AND CM.BNDL_REG_YN 	= #{searchBndlRegYn}		 </if> -->
				<!-- <if test="searchLoginCnt != null and searchLoginCnt != ''">	AND CM.LOGIN_CNT 	= #{searchLoginCnt}		 </if> -->
				<if test="searchScsnYn != null and searchScsnYn != ''">	AND CM.SCSN_YN 	= #{searchScsnYn}		 </if> 
				<!-- <if test="searchMajr != null and searchMajr != ''">	AND CM.MAJR 	= #{searchMajr}		 </if> -->
				<!-- <if test="searchReceiveMailYn != null and searchReceiveMailYn != ''">	AND CM.RECEIVE_MAIL_YN 	= #{searchReceiveMailYn}		 </if> -->
				<!-- <if test="searchReceiveSmsYn != null and searchReceiveSmsYn != ''">	AND CM.RECEIVE_SMS_YN 	= #{searchReceiveSmsYn}		 </if> -->
				<!-- <if test="searchForeignYn != null and searchForeignYn != ''">	AND CM.FOREIGN_YN 	= #{searchForeignYn}		 </if> -->
				<!-- <if test="searchNamecheckYn != null and searchNamecheckYn != ''">	AND CM.NAMECHECK_YN 	= #{searchNamecheckYn}		 </if> -->
				<!-- <if test="searchNationCode != null and searchNationCode != ''">	AND CM.NATION_CODE 	= #{searchNationCode}		 </if> -->
				<!-- <if test="searchCompanyId != null and searchCompanyId != ''">	AND CM.COMPANY_ID 	= #{searchCompanyId}		 </if> -->
				<!-- <if test="searchGPinYn != null and searchGPinYn != ''">	AND CM.G_PIN_YN 	= #{searchGPinYn}		 </if> -->
				<!-- <if test="searchGPinKey1 != null and searchGPinKey1 != ''">	AND CM.G_PIN_KEY1 	= #{searchGPinKey1}		 </if> -->
				<!-- <if test="searchGPinKey2 != null and searchGPinKey2 != ''">	AND CM.G_PIN_KEY2 	= #{searchGPinKey2}		 </if> -->
				<!-- <if test="searchMemDiv != null and searchMemDiv != ''">	AND CM.MEM_DIV 	= #{searchMemDiv}		 </if> -->
				<!-- <if test="searchSchoolSeq != null and searchSchoolSeq != ''">	AND CM.SCHOOL_SEQ 	= #{searchSchoolSeq}		 </if> -->
				<!-- <if test="searchTutorClauseAgreeYn != null and searchTutorClauseAgreeYn != ''">	AND CM.TUTOR_CLAUSE_AGREE_YN 	= #{searchTutorClauseAgreeYn}		 </if> -->
				<!-- <if test="searchAspId != null and searchAspId != ''">	AND CM.ASP_ID 	= #{searchAspId}		 </if> -->
				<!-- <if test="searchAgreeYn != null and searchAgreeYn != ''">	AND CM.AGREE_YN 	= #{searchAgreeYn}		 </if> -->
				<!-- <if test="searchNonageYn != null and searchNonageYn != ''">	AND CM.NONAGE_YN 	= #{searchNonageYn}		 </if> -->
				<!-- <if test="searchDeleteYn != null and searchDeleteYn != ''">	AND CM.DELETE_YN 	= #{searchDeleteYn}		 </if> -->
				<!-- <if test="searchInsertDate != null and searchInsertDate != ''">	AND CM.INSERT_DATE 	= #{searchInsertDate}		 </if> -->
				<!-- <if test="searchInsertUser != null and searchInsertUser != ''">	AND CM.INSERT_USER 	= #{searchInsertUser}		 </if> -->
				<!-- <if test="searchUpdateDate != null and searchUpdateDate != ''">	AND CM.UPDATE_DATE 	= #{searchUpdateDate}		 </if> -->
				<!-- <if test="searchUpdateUser != null and searchUpdateUser != ''">	AND CM.UPDATE_USER 	= #{searchUpdateUser}		 </if> -->
				<!-- <if test="searchCertiNo != null and searchCertiNo != ''">	AND CM.CERTI_NO 	= #{searchCertiNo}		 </if> -->
				<!-- <if test="searchCertiCharacter != null and searchCertiCharacter != ''">	AND CM.CERTI_CHARACTER 	= #{searchCertiCharacter}		 </if> -->
				<!-- <if test="searchCertiYn != null and searchCertiYn != ''">	AND CM.CERTI_YN 	= #{searchCertiYn}		 </if> -->
				<!-- <if test="searchCertiAttemptCnt != null and searchCertiAttemptCnt != ''">	AND CM.CERTI_ATTEMPT_CNT 	= #{searchCertiAttemptCnt}		 </if> -->
				<!-- <if test="searchCompNm != null and searchCompNm != ''">	AND CM.COMP_NM 	= #{searchCompNm}		 </if> -->
				<!-- <if test="searchDeptNm != null and searchDeptNm != ''">	AND CM.DEPT_NM 	= #{searchDeptNm}		 </if> -->
				<!-- <if test="searchDutyNm != null and searchDutyNm != ''">	AND CM.DUTY_NM 	= #{searchDutyNm}		 </if> -->
				<!-- <if test="searchRemk != null and searchRemk != ''">	AND CM.REMK 	= #{searchRemk}		 </if> -->
				<!-- <if test="searchWrongRegiNo != null and searchWrongRegiNo != ''">	AND CM.WRONG_REGI_NO 	= #{searchWrongRegiNo}		 </if> -->
				<!-- <if test="searchOrgPwNull != null and searchOrgPwNull != ''">	AND CM.ORG_PW_NULL 	= #{searchOrgPwNull}		 </if> -->
				<!-- <if test="searchOrgMemId != null and searchOrgMemId != ''">	AND CM.ORG_MEM_ID 	= #{searchOrgMemId}		 </if> -->
				<!-- <if test="searchLastLoginYmd != null and searchLastLoginYmd != ''">	AND CM.LAST_LOGIN_YMD 	= #{searchLastLoginYmd}		 </if> -->
				<!-- <if test="searchLastPwUpdtYmd != null and searchLastPwUpdtYmd != ''">	AND CM.LAST_PW_UPDT_YMD 	= #{searchLastPwUpdtYmd}		 </if> -->
				<!-- <if test="searchPwErrNumberTimes != null and searchPwErrNumberTimes != ''">	AND CM.PW_ERR_NUMBER_TIMES 	= #{searchPwErrNumberTimes}		 </if> -->
				<!-- <if test="searchUseExpireYmd != null and searchUseExpireYmd != ''">	AND CM.USE_EXPIRE_YMD 	= #{searchUseExpireYmd}		 </if> -->
				<if test="nowDtInsFlag != null and nowDtInsFlag != ''">	AND TO_CHAR(CM.INSERT_DATE, 'YYYY.MM.DD') = TO_CHAR(SYSDATE, 'YYYY.MM.DD')		 </if>
	</sql>
	
	<select id="getSearchEmail" parameterType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO" resultType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getSearchEmail ====== */
		<![CDATA[
	        SELECT
	                EMAIL
	          FROM COM_MEMBER 
	          WHERE 1=1
	             AND SCSN_YN = 'N'
	             AND DELETE_YN = 'N'
	             AND EMAIL = #{email}
	    ]]>
	    
	    <if test="memSeq != null and memSeq != ''">	AND MEM_SEQ <![CDATA[<>]]> #{memSeq}		 </if> 
	</select>
	
	<select id="getSearchHpNo" parameterType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO" resultType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getSearchHpNo ====== */
		<![CDATA[
	        SELECT
	                HP_NO1 || HP_NO2 || HP_NO3 AS HP_NO
	          FROM COM_MEMBER 
	          WHERE 1=1
	             AND SCSN_YN = 'N'
	             AND DELETE_YN = 'N'
	             AND HP_NO1 = #{hpNo1}
	             AND HP_NO2 = #{hpNo2}
	             AND HP_NO3 = #{hpNo3}
	    ]]>
	    
	    <if test="memSeq != null and memSeq != ''">	AND MEM_SEQ <![CDATA[<>]]> #{memSeq}		 </if> 
	</select>
	
	<select id="getMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getMember ====== */
			   SELECT CM.MEM_SEQ
					, CM.MEM_ID
					, CM.MEM_TYPE
					, CM.MEM_NAME
					, CM.PWD_QUEST
					, CM.SEX
					, CM.MEM_NAME_ENG
					, CM.MEM_BIRTH
					, SUBSTR(CM.MEM_BIRTH, 1,4) YEAR
                    , SUBSTR(CM.MEM_BIRTH, 5,2) MONTH
                    , SUBSTR(CM.MEM_BIRTH, 7,2) DAY
					, CM.PWD_QUEST_ANS
					, CM.MEM_PASSWORD
					, CM.EMAIL
					, SUBSTR(CM.EMAIL,(INSTR(CM.EMAIL, '@')+0)) EMAIL3 /* @부터 나머지 이메일 주소 까지 표시 */
					, CM.MEM_REGI_NO
					, CM.ZIP_CODE
					, CM.ADDRESS
					, CM.ADDRESS_DTL
					, CM.TEL_NO1
					, CM.TEL_NO2
					, CM.TEL_NO3
					, CM.HP_NO1
					, CM.HP_NO2
					, CM.HP_NO3
					, CM.NEWSLETTER_YN
					, CM.PHOTO_FILE_PATH
					, CM.WORKING_PLACE
					, CM.SCHOLARSHIP
					, CM.SECEDE_REASON
					, CM.RELATION_FIELD
					, CM.CAREER
					, CM.TITLE
					, CM.TITLE TITLE_PATH
					<!-- , CM.AUTH_GROUP_ID -->
					, CM.BNDL_REG_YN
					, CM.LOGIN_CNT
					, CM.SCSN_YN
					, CM.MAJR
					, CM.RECEIVE_MAIL_YN
					, CM.RECEIVE_SMS_YN
					, CM.FOREIGN_YN
					, CM.NAMECHECK_YN
					, CM.NATION_CODE
					, CM.COMPANY_ID
					, FN_GETCOMPAYNAME(CM.COMPANY_ID) as COMPANY_NAME
					, CM.G_PIN_YN
					, CM.G_PIN_KEY1
					, CM.G_PIN_KEY2
					, CM.MEM_DIV
					, CM.SCHOOL_SEQ
					, CM.TUTOR_CLAUSE_AGREE_YN
					, CM.ASP_ID
					, CM.AGREE_YN
					, CM.NONAGE_YN
					, CM.DELETE_YN
					, CM.INSERT_DATE
					, CM.INSERT_USER
					, CM.UPDATE_DATE
					, CM.UPDATE_USER
					, CM.CERTI_NO
					, CM.CERTI_CHARACTER
					, CM.CERTI_YN
					, CM.CERTI_ATTEMPT_CNT
					, CM.COMP_NM
					, CM.DEPT_NM
					, CM.DEPT_NO
					, CM.DUTY_NM
					, CM.REMK
					, CM.WRONG_REGI_NO
					, CM.ORG_PW_NULL
					, CM.ORG_MEM_ID
					, CM.LAST_LOGIN_YMD
					, CM.LAST_PW_UPDT_YMD
					, CM.PW_ERR_NUMBER_TIMES
					, CM.USE_EXPIRE_YMD
					,(SELECT  LISTAGG(A.AUTH_GROUP_NAME, ',') WITHIN GROUP( ORDER BY A.AUTH_GROUP_ID)
			        FROM     COM_AUTH_GROUP A,
			                 COM_AUTH_MEMBER B
			        WHERE    A.DELETE_YN     = 'N'
			        AND      A.AUTH_GROUP_ID = B.AUTH_GROUP_ID
			        AND      B.MEM_SEQ       = CM.MEM_SEQ
			        )
			        AUTH_GROUP_NAME
			        ,(SELECT  LISTAGG(A.AUTH_GROUP_ID, ',') WITHIN GROUP( ORDER BY A.AUTH_GROUP_ID)
			        FROM     COM_AUTH_GROUP A,
			                 COM_AUTH_MEMBER B
			        WHERE    A.DELETE_YN     = 'N'
			        AND      A.AUTH_GROUP_ID = B.AUTH_GROUP_ID
			        AND      B.MEM_SEQ       = CM.MEM_SEQ
			        )
			        AUTH_GROUP_ID
			        ,(SELECT  LISTAGG(A.DEPT_NO, ',') WITHIN GROUP( ORDER BY A.DEPT_NO)
				        FROM     LMS_DEPT_CDP_MAPPING A
				        WHERE     A.MEM_SEQ       = CM.MEM_SEQ
				     )
			        DEPT_NO_STR
			        , CM.COMP_LICENCE_CD
			        , CM.COMP_JOIN_DAY
			        , CM.COMP_TEL_NO
			        , CM.ATCH_FILE_ID
			        , CM.ATCH_FILE_ID2
			        , CM.HP_NO
			        
			        , CM.COMP_STATUS_CD
			        , CM.COMP_CAREER_YEAR
			        , CM.COMP_EDU_LEVEL_CD
			        , CM.COMP_LICENCE_NM
			        
			     	 , CM.STD_STATUS
					 , CM.OUT_EVAL_NCS_NAME
					 , CM.OUT_EVAL_PASS_YN
					 , CM.OUT_EVAL_PASS_DATE
					 , CM.STD_TRANSFER_YN
					 , CM.OUT_EVAL_NCS_TIME
					 , CM.STD_HAK_STATUS
					 , CM.STD_LEAVE_DATE
					 , CM.STD_COMPL_DATE

			        
				 FROM COM_MEMBER CM
			 	WHERE CM.MEM_SEQ 	= #{memSeq}
	</select>
	
	<select id="getStdMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getStdMember ====== */
			   <!-- SELECT CM.MEM_SEQ , 
				       CM.MEM_ID , 
				       CM.MEM_TYPE , 
				       CM.MEM_NAME , 
				       CM.MEM_BIRTH , 
				       SUBSTR(CM.MEM_BIRTH, 1,4) YEAR , 
				       SUBSTR(CM.MEM_BIRTH, 5,2) MONTH , 
				       SUBSTR(CM.MEM_BIRTH, 7,2) DAY , 
				       CM.PWD_QUEST_ANS , 
				       CM.MEM_PASSWORD , 
				       CM.EMAIL , 
				       CM.DEPT_NM , 
				       CM.DUTY_NM , 
				       CM.HP_NO , 
				       CM.STD_STATUS , 
				       CM.OUT_EVAL_NCS_NAME , 
				       CM.OUT_EVAL_PASS_YN , 
				       CM.OUT_EVAL_PASS_DATE , 
				       CM.STD_TRANSFER_YN , 
				       CM.OUT_EVAL_NCS_TIME , 
				       CM.STD_HAK_STATUS , 
				       CM.STD_LEAVE_DATE , 
				       CM.STD_COMPL_DATE , 
				       CM.STD_GOYONG_DATE, 
				       CM.STD_COMP_TEL_NO, 
				       CM.ETC_GRADE1 , 
				       CM.ETC_GRADE2 , 
				       CM.ETC_GRADE3 , 
				       CM.BIGO1 , 
				       CM.BIGO2 ,
				       CM.STD_COMP_OUT_DATE, 
				       CM.OUT_EVAL_NCS_YN, 
				       CM.OUT_EVAL_PROGRESS_YN, 
				       TR.TRANING_PROCESS_NAME, 
				       TR.YEAR, 
				       TR.TRANING_PROCESS_PERIOD,
				       TR.START_DATE , 
       				   TR.END_DATE,
       				   TR.OJT_CLASS,
 		      		   SK.GRAD_DT,
					   SK.EXT_DT ,
					   SK.SKNRGS_STTUS_NM,
					   (SELECT COUNT(*)
					       FROM    LMS_LESSON LES
					       WHERE   LES.MEM_SEQ = CM.MEM_SEQ
					       AND
					               (
					                       YYYY,TERM,SUBJECT_CODE,CLASS
					               )
					               IN
					               (SELECT YYYY,
					                       TERM,
					                       SUBJECT_CODE,
					                       CLASS
					               FROM    LMS_SUBJECT
					               WHERE   SUBJECT_TRANING_TYPE = 'OFF'
					               )
					       )
					       OFF_GOAL,
					       ( SELECT COUNT(*)
					       FROM    KUT_HAK.VH_OKLMS_TH_SCRE_CSTDY_SCRE SCR
					       WHERE   SCR.STUDNO = CM.MEM_ID
					       AND
					               (
					                       SCR.GRAD_CD = 'P' OR SUBSTR(SCR.GRAD_CD,0,1) = 'A' OR SUBSTR(SCR.GRAD_CD,0,1) = 'B' OR SUBSTR(SCR.GRAD_CD,0,1) = 'C'
					               )
					       AND
					               (
					                       SCR.COURSE_NO
					               )
					               IN
					               ( SELECT SUBJECT_CODE
					               FROM    LMS_SUBJECT
					               WHERE   SUBJECT_TRANING_TYPE = 'OFF'
					               )
					       )
					       OFF_COMPL,
					       (SELECT COUNT(*)
					       FROM    LMS_LESSON LES
					       WHERE   LES.MEM_SEQ = CM.MEM_SEQ
					       AND
					               (
					                       YYYY,TERM,SUBJECT_CODE,CLASS
					               )
					               IN
					               ( SELECT YYYY,
					                       TERM,
					                       SUBJECT_CODE,
					                       CLASS
					               FROM    LMS_SUBJECT
					               WHERE   SUBJECT_TRANING_TYPE = 'OJT'
					               )
					       )
					       OJT_GOAL,
					       (SELECT COUNT(*)
					       FROM    KUT_HAK.VH_OKLMS_TH_SCRE_CSTDY_SCRE SCR
					       WHERE   SCR.STUDNO  = CM.MEM_ID
					       AND     SCR.GRAD_CD = 'S'
					       AND
					               (
					                       COURSE_NO
					               )
					               IN
					               ( SELECT SUBJECT_CODE
					               FROM    LMS_SUBJECT
					               WHERE   SUBJECT_TRANING_TYPE = 'OJT'
					               )
					       )
					       OJT_COMPL,
					       (SELECT COUNT(*)
					       FROM    ( SELECT  STUD_ID,
					                        YR,
					                        SEMSTR_CD,
					                        YY_SEMSTR_NM,
					                        CORS_CD,
					                        CORS_NM,
					                        CLS_NO,
					                        CAPA_NM,
					                        CAPA_FID
					               FROM     KUT_MOB2.VH_OKLMS_LCTRE_COMPL_STAT
					               WHERE    STUD_ID =
					                        (SELECT MEM_ID
					                        FROM    COM_MEMBER
					                        WHERE   MEM_SEQ = #{memSeq}
					                        )
					               GROUP BY STUD_ID,
					                        YR,
					                        SEMSTR_CD,
					                        YY_SEMSTR_NM,
					                        CORS_CD,
					                        CORS_NM,
					                        CLS_NO,
					                        CAPA_NM,
					                        CAPA_FID
					               )
					               A
					       )
					       NCS_GOAL,
					       (SELECT COUNT(*)
					       FROM    ( SELECT  STUD_ID,
					                        YR,
					                        SEMSTR_CD,
					                        YY_SEMSTR_NM,
					                        CORS_CD,
					                        CORS_NM,
					                        CLS_NO,
					                        CAPA_NM,
					                        CAPA_FID
					               FROM     KUT_MOB2.VH_OKLMS_LCTRE_COMPL_STAT
					               WHERE    STUD_ID =
					                        (SELECT MEM_ID
					                        FROM    COM_MEMBER
					                        WHERE   MEM_SEQ = #{memSeq}
					                        )
					               AND      ACHV_YN = 'P'
					               GROUP BY STUD_ID,
					                        YR,
					                        SEMSTR_CD,
					                        YY_SEMSTR_NM,
					                        CORS_CD,
					                        CORS_NM,
					                        CLS_NO,
					                        CAPA_NM,
					                        CAPA_FID
					               )
					               A
					       )
					       NCS_COMPL
				  FROM COM_MEMBER CM 
				   LEFT OUTER JOIN 
				       (SELECT C.TRANING_PROCESS_NAME , 
				              A.COMPANY_ID, 
				              C.YEAR, 
				              C.TRANING_PROCESS_PERIOD,
				              C.START_DATE, 
              				  C.END_DATE,
              				  A.OJT_CLASS   
				         FROM LMS_TRANING_PROCESS A , 
				              LMS_TRANING_PROCESS_MAPPING B, 
				              LMS_TRANING_PROCESS_SEARCH C, 
				              LMS_LESSON D 
				        WHERE 1 = 1 
				              AND A.COMPANY_ID = B.COMPANY_ID 
				              AND A.TRANING_PROCESS_ID = B.TRANING_PROCESS_ID 
				              AND A.DELETE_YN = 'N' 
				              AND B.DELETE_YN = 'N' 
				              AND C.TRANING_PROCESS_ID = A.TRANING_PROCESS_ID 
				              AND C.DELETE_YN = 'N' 
				              AND D.YYYY = B.YYYY 
				              AND D.TERM = B.TERM 
				              AND D.SUBJECT_CODE = B.SUBJECT_CODE 
				              AND D.CLASS = B.CLASS 
				              AND D.MEM_SEQ = #{memSeq} 
				              AND ROWNUM = 1 
				       ) TR 
				       ON TR.COMPANY_ID = CM.COMPANY_ID 
				     LEFT OUTER JOIN KUT_MOB2.VH_OKLMS_TH_SKNRGS_M  SK
				       ON SK.STUDNO = CM.MEM_ID
				 WHERE CM.MEM_SEQ = #{memSeq} -->
				 
				 SELECT CM.MEM_SEQ , 
					       CM.MEM_ID , 
					       CM.MEM_TYPE , 
					       CM.MEM_NAME , 
					       CM.MEM_BIRTH , 
					       <!-- 
					       SUBSTR(CM.MEM_BIRTH, 1,4) YEAR , 
					       SUBSTR(CM.MEM_BIRTH, 5,2) MONTH , 
					       SUBSTR(CM.MEM_BIRTH, 7,2) DAY , 
					        -->
					       CM.PWD_QUEST_ANS , 
					       CM.MEM_PASSWORD , 
					       CM.EMAIL , 
					       CM.DEPT_NM , 
					       CM.DUTY_NM , 
					       CM.HP_NO , 
					       CM.STD_STATUS , 
					       CM.OUT_EVAL_NCS_NAME , 
					       CM.OUT_EVAL_PASS_YN , 
					       CM.OUT_EVAL_PASS_DATE , 
					       CM.STD_TRANSFER_YN , 
					       CM.OUT_EVAL_NCS_TIME , 
					       CM.STD_HAK_STATUS , 
					       CM.STD_LEAVE_DATE , 
					       CM.STD_COMPL_DATE , 
					       CM.STD_GOYONG_DATE, 
					       CM.STD_COMP_TEL_NO, 
					       CM.ETC_GRADE1 , 
					       CM.ETC_GRADE2 , 
					       CM.ETC_GRADE3 , 
					       CM.BIGO1 , 
					       CM.BIGO2 , 
					       CM.STD_COMP_OUT_DATE, 
					       CM.OUT_EVAL_NCS_YN, 
					       CM.OUT_EVAL_PROGRESS_YN, 
					       CM.TRANING_PROCESS_ID, 
					       CM.STD_TRANING_YEAR, 
					       TR.TRANING_PROCESS_NAME, 
					       TR.YEAR, 
					       TR.TRANING_PROCESS_PERIOD, 
					       TR.START_DATE , 
					       TR.END_DATE, 
					       (SELECT OJT_CLASS 
					         FROM LMS_TRANING_PROCESS A 
					        WHERE A.TRANING_PROCESS_ID = TR.TRANING_PROCESS_ID 
					              AND A.COMPANY_ID = CM.COMPANY_ID 
					              AND ROWNUM = 1 
					       ) AS OJT_CLASS, 
					       SK.GRAD_DT, 
					       SK.EXT_DT , 
					       SK.SKNRGS_STTUS_NM, 
					       (SELECT COUNT(*) 
					         FROM LMS_LESSON LES 
					        WHERE LES.MEM_SEQ = CM.MEM_SEQ 
					              AND 
					              ( 
					                  YYYY, 
					                  TERM, 
					                  SUBJECT_CODE, 
					                  CLASS 
					              ) 
					              IN 
					              (SELECT YYYY, 
					                     TERM, 
					                     SUBJECT_CODE, 
					                     CLASS 
					                FROM LMS_SUBJECT 
					               WHERE SUBJECT_TRANING_TYPE = 'OFF' 
					              ) 
					       ) OFF_GOAL, 
					       (SELECT COUNT(*) 
					         FROM KUT_HAK.VH_OKLMS_TH_SCRE_CSTDY_SCRE SCR 
					        WHERE SCR.STUDNO = CM.MEM_ID 
					              AND 
					              ( 
					                  SCR.GRAD_CD = 'P' 
					                  OR SUBSTR(SCR.GRAD_CD,0,1) = 'A' 
					                  OR SUBSTR(SCR.GRAD_CD,0,1) = 'B' 
					                  OR SUBSTR(SCR.GRAD_CD,0,1) = 'C' 
					              ) 
					              AND 
					              ( 
					                  SCR.COURSE_NO 
					              ) 
					              IN 
					              (SELECT SUBJECT_CODE 
					                FROM LMS_SUBJECT 
					               WHERE SUBJECT_TRANING_TYPE = 'OFF' 
					              ) 
					       ) OFF_COMPL, 
					       (SELECT COUNT(*) 
					         FROM LMS_LESSON LES 
					        WHERE LES.MEM_SEQ = CM.MEM_SEQ 
					              AND 
					              ( 
					                  YYYY, 
					                  TERM, 
					                  SUBJECT_CODE, 
					                  CLASS 
					              ) 
					              IN 
					              (SELECT YYYY, 
					                     TERM, 
					                     SUBJECT_CODE, 
					                     CLASS 
					                FROM LMS_SUBJECT 
					               WHERE SUBJECT_TRANING_TYPE = 'OJT' 
					              ) 
					       ) OJT_GOAL, 
					       (SELECT COUNT(*) 
					         FROM KUT_HAK.VH_OKLMS_TH_SCRE_CSTDY_SCRE SCR 
					        WHERE SCR.STUDNO = CM.MEM_ID 
					              AND SCR.GRAD_CD = 'S' 
					              AND 
					              ( 
					                  COURSE_NO 
					              ) 
					              IN 
					              (SELECT SUBJECT_CODE 
					                FROM LMS_SUBJECT 
					               WHERE SUBJECT_TRANING_TYPE = 'OJT' 
					              ) 
					       ) OJT_COMPL, 
					       (SELECT COUNT(*) 
					         FROM 
					              (SELECT STUD_ID, 
					                     YR, 
					                     SEMSTR_CD, 
					                     YY_SEMSTR_NM, 
					                     CORS_CD, 
					                     CORS_NM, 
					                     CLS_NO, 
					                     CAPA_NM, 
					                     CAPA_FID 
					                FROM KUT_MOB2.VH_OKLMS_LCTRE_COMPL_STAT 
					               WHERE STUD_ID = 
					                     (SELECT MEM_ID 
					                       FROM COM_MEMBER 
					                      WHERE MEM_SEQ = #{memSeq} 
					                     ) 
					               GROUP BY STUD_ID, 
					                     YR, 
					                     SEMSTR_CD, 
					                     YY_SEMSTR_NM, 
					                     CORS_CD, 
					                     CORS_NM, 
					                     CLS_NO, 
					                     CAPA_NM, 
					                     CAPA_FID 
					              ) A 
					       ) NCS_GOAL, 
					       (SELECT COUNT(*) 
					         FROM 
					              (SELECT STUD_ID, 
					                     YR, 
					                     SEMSTR_CD, 
					                     YY_SEMSTR_NM, 
					                     CORS_CD, 
					                     CORS_NM, 
					                     CLS_NO, 
					                     CAPA_NM, 
					                     CAPA_FID 
					                FROM KUT_MOB2.VH_OKLMS_LCTRE_COMPL_STAT 
					               WHERE STUD_ID = 
					                     (SELECT MEM_ID 
					                       FROM COM_MEMBER 
					                      WHERE MEM_SEQ = #{memSeq} 
					                     ) 
					                     AND ACHV_YN = 'P' 
					               GROUP BY STUD_ID, 
					                     YR, 
					                     SEMSTR_CD, 
					                     YY_SEMSTR_NM, 
					                     CORS_CD, 
					                     CORS_NM, 
					                     CLS_NO, 
					                     CAPA_NM, 
					                     CAPA_FID 
					              ) A 
					       ) NCS_COMPL 
					  FROM COM_MEMBER CM 
					   LEFT OUTER JOIN LMS_TRANING_PROCESS_SEARCH TR 
					       ON TR.TRANING_PROCESS_ID = CM.TRANING_PROCESS_ID 
					   LEFT OUTER JOIN KUT_MOB2.VH_OKLMS_TH_SKNRGS_M SK 
					       ON SK.STUDNO = CM.MEM_ID 
					 WHERE CM.MEM_SEQ = #{memSeq}
 
			 	
	</select>
	
	<select id="listMemberAllExcelList" parameterType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO" resultType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.listMemberAllExcelList ====== */
	        SELECT CM.MEM_SEQ
					, CM.MEM_ID
					, CM.MEM_TYPE
					, CM.MEM_NAME
					, CM.PWD_QUEST
					, CM.SEX
					, CM.MEM_NAME_ENG
					, CM.MEM_BIRTH
					, CM.PWD_QUEST_ANS
					, CM.MEM_PASSWORD
				<if test="memPasswordEncript == null and memPasswordEncript == ''">  '' AS MEM_PASSWORD_ENCRIPTED,		 </if>
       		    <if test="memPasswordEncript != null and memPasswordEncript != ''"> HEX(AES_ENCRYPT(#{memPasswordEncript},#{memPasswordEncript})) MEM_PASSWORD_ENCRIPTED, </if> /* 비밀번호( 사용자가 화면에서 입력한 암호화 된 비밀번호 ) */
		        	, CM.EMAIL
					, CM.MEM_REGI_NO
					, CM.ZIP_CODE
					, CM.ADDRESS
					, CM.ADDRESS_DTL
					, CM.TEL_NO1
					, CM.TEL_NO2
					, CM.TEL_NO3
					, CM.HP_NO1
					, CM.HP_NO2
					, CM.HP_NO3
					, CM.NEWSLETTER_YN
					, CM.PHOTO_FILE_PATH
					, CM.WORKING_PLACE
					, CM.SCHOLARSHIP
					, CM.SECEDE_REASON
					, CM.RELATION_FIELD
					, CM.CAREER
					, CM.TITLE
					, CM.AUTH_GROUP_ID
					, CM.BNDL_REG_YN
<!-- 					, CM.LOGIN_CNT -->
					, CM.SCSN_YN
					, CM.MAJR
					, CM.RECEIVE_MAIL_YN
					, CM.RECEIVE_SMS_YN
					, CM.FOREIGN_YN
					, CM.NAMECHECK_YN
					, CM.NATION_CODE
					, CM.COMPANY_ID
					, CM.G_PIN_YN
					, CM.G_PIN_KEY1
					, CM.G_PIN_KEY2
					, CM.MEM_DIV
					, CM.SCHOOL_SEQ
					, CM.TUTOR_CLAUSE_AGREE_YN
					, CM.ASP_ID
					, CM.AGREE_YN
					, CM.NONAGE_YN
					, CM.DELETE_YN
<!-- 					, CM.INSERT_DATE -->
					, CM.INSERT_USER
					, CM.UPDATE_DATE
					, CM.UPDATE_USER
					, CM.CERTI_NO
					, CM.CERTI_CHARACTER
					, CM.CERTI_YN
					, CM.CERTI_ATTEMPT_CNT
					, CM.COMP_NM
					, CM.DEPT_NM
					, CM.DUTY_NM
					, CM.REMK
					, CM.WRONG_REGI_NO
					, CM.ORG_PW_NULL
					, CM.ORG_MEM_ID
					, CM.LAST_LOGIN_YMD
					, CM.LAST_PW_UPDT_YMD
					, CM.PW_ERR_NUMBER_TIMES
					, CM.USE_EXPIRE_YMD
					, TO_CHAR(CM.INSERT_DATE, 'YYYY.MM.DD') INSERT_DATE 
					, (SELECT	 COMPANY_NAME 
						FROM	 lms_company 
					  WHERE	 COMPANY_ID = CM.COMPANY_ID AND DELETE_YN = 'N') 
						COMPANY_NAME
					, (SELECT COUNT(1) CNT
						FROM COM_LOGIN_LOG 
					  WHERE	MEM_SEQ = CM.MEM_SEQ) 
						LOGIN_CNT 
					, (SELECT  LISTAGG(A.AUTH_GROUP_NAME, ',') WITHIN GROUP( ORDER BY A.AUTH_GROUP_ID)
				        FROM     COM_AUTH_GROUP A,
				                 COM_AUTH_MEMBER B
				        WHERE    A.DELETE_YN     = 'N'
				        AND      A.AUTH_GROUP_ID = B.AUTH_GROUP_ID
				        AND      B.MEM_SEQ       = CM.MEM_SEQ
				        )
				        AUTH_GROUP_NAME 
					, '' SCHOOL_NAME
					, '' INSTITUTE_NAME
					, '' POSITION 
					, '' CERTIFICATION_DIV 
				 FROM COM_MEMBER CM
			 	WHERE 1=1 
			 	AND CM.DELETE_YN = 'N'
			
			<choose>
	            <when test="searchName != null and searchName != ''">
	                	<if test="searchName eq 'NAME'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.MEM_NAME LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	                	<if test="searchName eq 'ID'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.MEM_ID LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	            </when>
	            <otherwise>
	            	<if test="searchWord != null and searchWord != ''">
	            		AND ( CM.MEM_NAME LIKE '%' || #{searchWord  } || '%' OR CM.MEM_ID LIKE '%' || #{searchWord  } || '%' )
	            	</if>
	            </otherwise>
	        </choose>
	        
	        <if test="searchAuthGroupId != null and searchAuthGroupId != ''">	
	       	 	AND CM.MEM_SEQ IN (
	       	 		SELECT MEM_SEQ 
				         FROM COM_AUTH_MEMBER 
				        WHERE AUTH_GROUP_ID = #{searchAuthGroupId}	
	        	)
	         </if>
        
			ORDER BY CM.MEM_SEQ DESC
	</select>
	
	<select id="listMemberMail" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.listMemberMail ====== */
			SELECT  MEM_SEQ, 
                        MEM_ID, 
                        MEM_TYPE, 
                        MEM_NAME,                
                        EMAIL,                
                        HP_NO1||HP_NO2||HP_NO3 TR_PHONE 
                  FROM  COM_MEMBER M 
		]]>
			 WHERE 1 = 1 
			 AND DELETE_YN = 'N'
			 AND MEM_SEQ IN
		<foreach collection="memSeqs" item="memSeqIds" index="index" open="(" close=")" separator=",">
			 '${memSeqIds}'
		</foreach>
	</select>

<!-- 	<select id="listMember" parameterType="hashmap" resultType="org.egovframe.rte.psl.dataaccess.util.EgovMap"> -->
<!-- 	<select id="listMember" parameterType="hashmap" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO"> -->
<!-- 	<select id="listMember" parameterType="hashmap" resultMap="member-result"> typeHandler 를 적용해야하는 경우. -->
	<select id="listMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.listMember ====== */
		<include refid="kr.co.gocle.include.paging-start"/>
			   SELECT CM.MEM_SEQ
					, CM.MEM_ID
					, CM.MEM_TYPE
					, CM.MEM_NAME
					, CM.PWD_QUEST
					, CM.SEX
					, CM.MEM_NAME_ENG
					, CM.MEM_BIRTH
					, CM.PWD_QUEST_ANS
					, CM.MEM_PASSWORD
				<if test="memPasswordEncript == null and memPasswordEncript == ''">  '' AS MEM_PASSWORD_ENCRIPTED,		 </if>
       		    <if test="memPasswordEncript != null and memPasswordEncript != ''"> HEX(AES_ENCRYPT(#{memPasswordEncript},#{memPasswordEncript})) MEM_PASSWORD_ENCRIPTED, </if> /* 비밀번호( 사용자가 화면에서 입력한 암호화 된 비밀번호 ) */
		        	, CM.EMAIL
					, CM.MEM_REGI_NO
					, CM.ZIP_CODE
					, CM.ADDRESS
					, CM.ADDRESS_DTL
					, CM.TEL_NO1
					, CM.TEL_NO2
					, CM.TEL_NO3
					, CM.HP_NO1
					, CM.HP_NO2
					, CM.HP_NO3
					, CM.NEWSLETTER_YN
					, CM.PHOTO_FILE_PATH
					, CM.WORKING_PLACE
					, CM.SCHOLARSHIP
					, CM.SECEDE_REASON
					, CM.RELATION_FIELD
					, CM.CAREER
					, CM.TITLE
					, CM.AUTH_GROUP_ID
					, CM.BNDL_REG_YN
<!-- 					, CM.LOGIN_CNT -->
					, CM.SCSN_YN
					, CM.MAJR
					, CM.RECEIVE_MAIL_YN
					, CM.RECEIVE_SMS_YN
					, CM.FOREIGN_YN
					, CM.NAMECHECK_YN
					, CM.NATION_CODE
					, CM.COMPANY_ID
					, CM.G_PIN_YN
					, CM.G_PIN_KEY1
					, CM.G_PIN_KEY2
					, CM.MEM_DIV
					, CM.SCHOOL_SEQ
					, CM.TUTOR_CLAUSE_AGREE_YN
					, CM.ASP_ID
					, CM.AGREE_YN
					, CM.NONAGE_YN
					, CM.DELETE_YN
<!-- 					, CM.INSERT_DATE -->
					, CM.INSERT_USER
					, CM.UPDATE_DATE
					, CM.UPDATE_USER
					, CM.CERTI_NO
					, CM.CERTI_CHARACTER
					, CM.CERTI_YN
					, CM.CERTI_ATTEMPT_CNT
					, CM.COMP_NM
					, CM.DEPT_NM
					, CM.DUTY_NM
					, CM.REMK
					, CM.WRONG_REGI_NO
					, CM.ORG_PW_NULL
					, CM.ORG_MEM_ID
					, CM.LAST_LOGIN_YMD
					, CM.LAST_PW_UPDT_YMD
					, CM.PW_ERR_NUMBER_TIMES
					, CM.USE_EXPIRE_YMD
					, TO_CHAR(CM.INSERT_DATE, 'YYYY.MM.DD') INSERT_DATE 
					, (SELECT	 COMPANY_NAME 
						FROM	 lms_company 
					  WHERE	 COMPANY_ID = CM.COMPANY_ID AND DELETE_YN = 'N') 
						COMPANY_NAME
					, (SELECT COUNT(1) CNT
						FROM COM_LOGIN_LOG 
					  WHERE	MEM_SEQ = CM.MEM_SEQ) 
						LOGIN_CNT 
					, (SELECT  LISTAGG(A.AUTH_GROUP_NAME, ',') WITHIN GROUP( ORDER BY A.AUTH_GROUP_ID)
				        FROM     COM_AUTH_GROUP A,
				                 COM_AUTH_MEMBER B
				        WHERE    A.DELETE_YN     = 'N'
				        AND      A.AUTH_GROUP_ID = B.AUTH_GROUP_ID
				        AND      B.MEM_SEQ       = CM.MEM_SEQ
				        )
				        AUTH_GROUP_NAME 
					, '' SCHOOL_NAME
					, '' INSTITUTE_NAME
					, '' POSITION 
					, '' CERTIFICATION_DIV 
				 FROM COM_MEMBER CM
			 	WHERE 1=1 
			 	AND CM.DELETE_YN = 'N'
			
			<choose>
	            <when test="searchName != null and searchName != ''">
	                	<if test="searchName eq 'NAME'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.MEM_NAME LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	                	<if test="searchName eq 'ID'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.MEM_ID LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	            </when>
	            <otherwise>
	            	<if test="searchWord != null and searchWord != ''">
	            		AND ( CM.MEM_NAME LIKE '%' || #{searchWord  } || '%' OR CM.MEM_ID LIKE '%' || #{searchWord  } || '%' )
	            	</if>
	            </otherwise>
	        </choose>
	        
	        <if test="searchAuthGroupId != null and searchAuthGroupId != ''">	
	       	 	AND CM.MEM_SEQ IN (
	       	 		SELECT MEM_SEQ 
				         FROM COM_AUTH_MEMBER 
				        WHERE AUTH_GROUP_ID = #{searchAuthGroupId}	
	        	)
	         </if>
        
			ORDER BY CM.MEM_SEQ DESC
		<include refid="kr.co.gocle.include.paging-end"/>
	</select>
	
	<select id="getMemberCnt" parameterType="java.util.HashMap" resultType="java.lang.Integer">
	
	    <![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getMemberCnt ====== */
	        SELECT
	               COUNT(*) CNT
	          FROM COM_MEMBER CM
	          WHERE 1=1
	    ]]>

		<include refid="listMember-where"/>
	</select>

	<insert id="insertMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.insertMember ====== */
		]]>
			INSERT INTO COM_MEMBER (
								MEM_SEQ
								, MEM_ID
								, MEM_TYPE
								, MEM_NAME
								, SEX
								, MEM_NAME_ENG
								, MEM_BIRTH
                                , MEM_PASSWORD 
								, EMAIL
								, ZIP_CODE
								, ADDRESS
								, ADDRESS_DTL
								, TEL_NO1
								, TEL_NO2
								, TEL_NO3
								, HP_NO1
								, HP_NO2
								, HP_NO3
								, NEWSLETTER_YN
								, PHOTO_FILE_PATH
								, WORKING_PLACE
								, SCHOLARSHIP
								, SECEDE_REASON
								, RELATION_FIELD
								, CAREER
								, TITLE
								, AUTH_GROUP_ID
								, BNDL_REG_YN
								, LOGIN_CNT
								, SCSN_YN
								, MAJR
								, RECEIVE_MAIL_YN
								, RECEIVE_SMS_YN
								, FOREIGN_YN
								, NAMECHECK_YN
								, NATION_CODE
								, COMPANY_ID
								, MEM_DIV
								, SCHOOL_SEQ
								, TUTOR_CLAUSE_AGREE_YN
								, AGREE_YN
								, NONAGE_YN
								, DELETE_YN
								, INSERT_DATE
								, INSERT_USER
								, UPDATE_DATE
								, UPDATE_USER
								, CERTI_NO
								, CERTI_CHARACTER
								, CERTI_YN
								, CERTI_ATTEMPT_CNT
								, COMP_NM
								, LAST_PW_UPDT_YMD
								, USE_EXPIRE_YMD
								, DEPT_NO
								, DEPT_NM
								, COMP_LICENCE_CD
								, COMP_JOIN_DAY
								, COMP_TEL_NO
								, ATCH_FILE_ID
								, HP_NO
								, DUTY_NM
								, COMP_CAREER_YEAR
								, COMP_EDU_LEVEL_CD
								, COMP_LICENCE_NM
									) 
					VALUES 
					( 
								#{memSeq}
								, #{memId}
								, #{memType}
								, #{memName}
								, #{sex}
								, #{memNameEng}
								, #{memBirth}
								<!-- , rawtohex(DBMS_CRYPTO.Hash(to_clob(to_char(#{memPasswordEncript})),3)) -->
								<!-- , HEX(AES_ENCRYPT(#{memPasswordEncript},#{memPasswordEncript}))  -->
								, #{encryptShaPw}
								, #{email}
								, #{zipCode}
								, #{address}
								, #{addressDtl}
								, #{telNo1}
								, #{telNo2}
								, #{telNo3}
								, #{hpNo1}
								, #{hpNo2}
								, #{hpNo3}
								, #{newsletterYn}
								, #{photoFilePath}
								, #{workingPlace}
								, #{scholarship}
								, #{secedeReason}
								, #{relationField}
								, #{career}
								, #{titlePath}
								, #{authGroupId}
								, 'N'
								, 0
								, 'N'
								, #{majr}
								, #{receiveMailYn}
								, #{receiveSmsYn}
								, #{foreignYn}
								, #{namecheckYn}
								, #{nationCode}
								, #{companyId}
								, 'G'
								, #{schoolSeq}
								, 'N'
								, 'Y'
								, 'N'
								, 'N'
								, SYSDATE
								, #{sessionMemSeq}
								, SYSDATE
								, #{sessionMemSeq}
								, #{certiNo}
								, #{certiCharacter}
								, 'N'
								, 0
								, #{compNm}
								, SYSDATE
								, SYSDATE + #{loginPWMaxUsedDays} 
								, #{deptNo}
								, #{deptNm}
								
								, #{compLicenceCd}
								, #{compJoinDay}
								, #{compTelNo}
								, #{atchFileId}
								, #{hpNo}
								, #{dutyNm}
								, #{compCareerYear}
								, #{compEduLevelCd}
								, #{compLicenceNm}
							
								)
	</insert>
	
	<insert id="insertAuthMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.insertAuthMember ====== */
		]]>
			INSERT
			INTO   COM_AUTH_MEMBER
			       (
			              MEM_SEQ,
			              AUTH_GROUP_ID,
			              MEM_TYPE
			       )
			       VALUES
			       (
			              #{memSeq},
			              #{authGroupId},
			              #{memType}
				   )
	</insert>
	
	<delete id="deleteAuthMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.deleteAuthMember ====== */
		]]>
			DELETE  FROM COM_AUTH_MEMBER WHERE MEM_SEQ  = #{memSeq}
	</delete>
	
	<delete id="deleteDeptMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.deleteDeptMember ====== */
		]]>
			DELETE  FROM LMS_DEPT_CDP_MAPPING WHERE MEM_SEQ  = #{memSeq}
	</delete>
	
	<insert id="insertDeptMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.insertDeptMember ====== */
		]]>
			INSERT
			INTO   LMS_DEPT_CDP_MAPPING
			       (
			              DEPT_NO,
			              MEM_SEQ
			       )
			       VALUES
			       (
			              #{deptNo},
			              #{memSeq}
				   )
	</insert>
	
	<delete id="deleteAuthMemberList" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.deleteAuthMember ====== */
		]]>
			DELETE  FROM COM_AUTH_MEMBER 
			WHERE MEM_SEQ IN
		<foreach collection="memSeqs" item="delMemSeqIds" index="index" open="(" close=")" separator=",">
			 '${delMemSeqIds}'
		</foreach>
	</delete>
	
	
	<insert id="insertExcelMemberTemp" parameterType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.insertExcelMemberTemp ====== */
		]]>
			INSERT INTO COM_MEMBER (
								 MEM_SEQ
								, MEM_ID
								, MEM_TYPE
								, MEM_NAME
								, SEX
								, MEM_NAME_ENG
								, MEM_BIRTH
                                , MEM_PASSWORD 
								, EMAIL
								, ZIP_CODE
								, ADDRESS
								, ADDRESS_DTL
								, TEL_NO1
								, TEL_NO2
								, TEL_NO3
								, HP_NO1
								, HP_NO2
								, HP_NO3
								, NEWSLETTER_YN
								, PHOTO_FILE_PATH
								, WORKING_PLACE
								, SCHOLARSHIP
								, SECEDE_REASON
								, RELATION_FIELD
								, CAREER
								, TITLE
								, AUTH_GROUP_ID
								, BNDL_REG_YN
								, LOGIN_CNT
								, SCSN_YN
								, MAJR
								, RECEIVE_MAIL_YN
								, RECEIVE_SMS_YN
								, FOREIGN_YN
								, NAMECHECK_YN
								, NATION_CODE
								, COMPANY_ID
								, MEM_DIV
								, SCHOOL_SEQ
								, TUTOR_CLAUSE_AGREE_YN
								, AGREE_YN
								, NONAGE_YN
								, DELETE_YN
								, INSERT_DATE
								, INSERT_USER
								, UPDATE_DATE
								, UPDATE_USER
								, CERTI_NO
								, CERTI_CHARACTER
								, CERTI_YN
								, CERTI_ATTEMPT_CNT
								, COMP_NM
								, LAST_PW_UPDT_YMD
								, USE_EXPIRE_YMD
									) 
					VALUES 
					( 
								#{memSeq}
								, #{memId}
								, #{memType}
								, #{memName}
								, #{sex}
								, #{memNameEng}
								, #{memBirth}
								<!-- , rawtohex(DBMS_CRYPTO.Hash(to_clob(to_char(#{memPassword})),3)) -->
								, #{encryptShaPw}
								, #{email}
								, #{zipCode}
								, #{address}
								, #{addressDtl}
								, #{telNo1}
								, #{telNo2}
								, #{telNo3}
								, #{hpNo1}
								, #{hpNo2}
								, #{hpNo3}
								, #{newsletterYn}
								, #{photoFilePath}
								, #{workingPlace}
								, #{scholarship}
								, #{secedeReason}
								, #{relationField}
								, #{career}
								, #{titlePath}
								, #{authGroupId}
								, #{bndlRegYn} 
								, 0
								, 'N'
								, #{majr}
								, #{receiveMailYn}
								, #{receiveSmsYn}
								, #{foreignYn}
								, #{namecheckYn}
								, #{nationCode}
								, #{companyId}
								, 'G'
								, #{schoolSeq}
								, 'N'
								, 'Y'
								, 'N'
								, 'N'
								, SYSDATE
								, #{sessionMemSeq}
								, SYSDATE
								, #{sessionMemSeq}
								, #{certiNo}
								, #{certiCharacter}
								, 'N'
								, 0
								, #{compNm}
								, SYSDATE
								, SYSDATE + #{loginPWMaxUsedDays}
								)
	</insert>
	
	<insert id="insertExcelMember" parameterType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO">
	<![CDATA[
	/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.insertExcelMember ====== */
	]]>
	INSERT INTO COM_MEMBER (
		    MEM_SEQ,
			MEM_ID,
			MEM_TYPE,
			MEM_NAME,
			SEX,
			MEM_BIRTH,
			MEM_PASSWORD,
			EMAIL,
			ZIP_CODE,
			ADDRESS,
			ADDRESS_DTL,
			HP_NO1,
			HP_NO2,
			HP_NO3,
			AUTH_GROUP_ID,
			COMPANY_ID,
			COMP_NM,
			LAST_PW_UPDT_YMD,
			USE_EXPIRE_YMD,
			BNDL_REG_YN,
			FOREIGN_YN,
			RECEIVE_MAIL_YN,
			RECEIVE_SMS_YN,
			INSERT_USER,
			INSERT_DATE
		) 
	VALUES 
	( 
		<if test="memSeq != null and memSeq != ''">	#{memSeq},		 </if>
		<if test="memId != null and memId != ''">	#{memId},		 </if>
		<if test="memType != null and memType != ''">	#{memType},		 </if>
		<if test="memName != null and memName != ''">	#{memName},		 </if>
		<if test="sex != null and sex != ''">	#{sex},		 </if>
		<if test="memBirth != null and memBirth != ''">	#{memBirth},		 </if>
		<if test="memPassword != null and memPassword != ''">	#{encryptShaPw},<!-- HEX(AES_ENCRYPT(#{memPassword},#{memPassword})),	 -->	 </if>
		<if test="email != null and email != ''">	#{email},		 </if>
		<if test="zipCode != null and zipCode != ''">	#{zipCode},		 </if>
		<if test="address != null and address != ''">	#{address},		 </if>
		<if test="addressDtl != null and addressDtl != ''">	#{addressDtl},		 </if>
		<if test="hpNo1 != null and hpNo1 != ''">	#{hpNo1},		 </if>
		<if test="hpNo2 != null and hpNo2 != ''">	#{hpNo2},		 </if>
		<if test="hpNo3 != null and hpNo3 != ''">	#{hpNo3},		 </if>
		<if test="authGroupId != null and authGroupId != ''">	#{authGroupId},		 </if>
		<if test="companyId != null and companyId != ''">	#{companyId},		 </if>
		<if test="compNm != null and compNm != ''">	#{compNm},		 </if>
		SYSDATE,
		<if test="loginPWMaxUsedDays != null and loginPWMaxUsedDays != ''">	SYSDATE + #{loginPWMaxUsedDays},		 </if>
		<if test="bndlRegYn != null and bndlRegYn != ''">	#{bndlRegYn},		 </if>
		<if test="foreignYn != null and foreignYn != ''">	#{foreignYn},		 </if>
		<if test="receiveMailYn != null and receiveMailYn != ''">	#{receiveMailYn},  </if>
		<if test="receiveSmsYn != null and receiveSmsYn != ''">	#{receiveSmsYn},	   </if>
		<if test="sessionMemSeq != null and sessionMemSeq != ''">	#{sessionMemSeq},  </if>
		SYSDATE
		)
	</insert>
	
	
	<insert id="insertExcelCompMember" parameterType="kr.co.gocle.oklms.la.member.vo.ExcelMemberVO">
	<![CDATA[
	/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.insertExcelMember ====== */
	]]>
	INSERT INTO COM_MEMBER (
		    MEM_SEQ,
			MEM_ID,
			MEM_TYPE,
			MEM_NAME,
			SEX,
			MEM_BIRTH,
			MEM_PASSWORD,
			EMAIL,
			ZIP_CODE,
			ADDRESS,
			ADDRESS_DTL,
			HP_NO1,
			HP_NO2,
			HP_NO3,
			AUTH_GROUP_ID,
			COMPANY_ID,
			COMP_NM,
			LAST_PW_UPDT_YMD,
			USE_EXPIRE_YMD,
			BNDL_REG_YN,
			FOREIGN_YN,
			RECEIVE_MAIL_YN,
			RECEIVE_SMS_YN,
			INSERT_USER,
			INSERT_DATE,
			HP_NO,
			DUTY_NM,
			COMP_LICENCE_CD,
			COMP_JOIN_DAY,
			COMP_TEL_NO
		) 
	VALUES 
	( 
		#{memSeq},		 
		#{memId},		
		#{memType},		
		#{memName},		
		#{sex},		 
		#{memBirth},		 
		#{encryptShaPw},<!-- HEX(AES_ENCRYPT(#{memPassword},#{memPassword})),	 -->	 
		#{email},		 
		#{zipCode},		 
		#{address},		 
		#{addressDtl},		 
		#{hpNo1},		 
		#{hpNo2},		 
		#{hpNo3},		 
		#{authGroupId},		 
		#{companyId},		 
		FN_GETCOMPAYNAME(#{companyId}),		
		SYSDATE,
		SYSDATE + #{loginPWMaxUsedDays},		
		#{bndlRegYn},		 
		#{foreignYn},		 
		#{receiveMailYn},  
		#{receiveSmsYn},	  
		#{sessionMemSeq},  
		SYSDATE,
		#{hpNo},
		#{dutyNm},
		#{compLicenceCd},
		#{compJoinDay},
		#{compTelNo}
		)
	</insert>


	<update id="updateMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.updateMember ====== */
	        UPDATE COM_MEMBER 
	        SET UPDATE_DATE 	= SYSDATE
				<if test="memId != null and memId != ''">	, MEM_ID 	= #{memId}		 </if>
				<if test="memType != null and memType != ''">	, MEM_TYPE 	= #{memType}		 </if>
				<if test="memName != null and memName != ''">	, MEM_NAME 	= #{memName}		 </if>
				<!-- <if test="pwdQuest != null and pwdQuest != ''">	, PWD_QUEST 	= #{pwdQuest}		 </if> -->
				<if test="sex != null and sex != ''">	, SEX 	= #{sex}		 </if>
				<if test="memNameEng != null and memNameEng != ''">	, MEM_NAME_ENG 	= #{memNameEng}		 </if>
				<if test="memBirth != null and memBirth != ''">	, MEM_BIRTH 	= #{memBirth}		 </if>
				
				<if test="memPassword != null and memPassword != ''">	,MEM_PASSWORD = #{encryptShaPw}<!-- HEX(AES_ENCRYPT(#{memPassword},#{memPassword})) --> </if>
				
				
				<!-- <if test="pwdQuestAns != null and pwdQuestAns != ''">	, PWD_QUEST_ANS 	= #{pwdQuestAns}		 </if>
				
				<if test="memPasswordEncript != null and memPasswordEncript != ''">	, MEM_PASSWORD 	= rawtohex(DBMS_CRYPTO.Hash(to_clob(to_char(#{memPasswordEncript})),3))		 </if> -->
				
				<if test="email != null and email != ''">	, EMAIL 	= #{email}		 </if>
				<if test="memRegiNo != null and memRegiNo != ''">	, MEM_REGI_NO 	= #{memRegiNo}		 </if>
				<if test="zipCode != null and zipCode != ''">	, ZIP_CODE 	= #{zipCode}		 </if>
				<if test="address != null and address != ''">	, ADDRESS 	= #{address}		 </if>
				<if test="addressDtl != null and addressDtl != ''">	, ADDRESS_DTL 	= #{addressDtl}		 </if>
				<if test="telNo1 != null and telNo1 != ''">	, TEL_NO1 	= #{telNo1}		 </if>
				<if test="telNo2 != null and telNo2 != ''">	, TEL_NO2 	= #{telNo2}		 </if>
				<if test="telNo3 != null and telNo3 != ''">	, TEL_NO3 	= #{telNo3}		 </if>
				<if test="hpNo1 != null and hpNo1 != ''">	, HP_NO1 	= #{hpNo1}		 </if>
				<if test="hpNo2 != null and hpNo2 != ''">	, HP_NO2 	= #{hpNo2}		 </if>
				<if test="hpNo3 != null and hpNo3 != ''">	, HP_NO3 	= #{hpNo3}		 </if>
				<if test="newsletterYn != null and newsletterYn != ''">	, NEWSLETTER_YN 	= #{newsletterYn}		 </if>
				<if test="photoFilePath != null and photoFilePath != ''">	, PHOTO_FILE_PATH 	= #{photoFilePath}		 </if>
				<if test="workingPlace != null and workingPlace != ''">	, WORKING_PLACE 	= #{workingPlace}		 </if>
				<if test="scholarship != null and scholarship != ''">	, SCHOLARSHIP 	= #{scholarship}		 </if>
				<if test="secedeReason != null and secedeReason != ''">	, SECEDE_REASON 	= #{secedeReason}		 </if>
				<if test="relationField != null and relationField != ''">	, RELATION_FIELD 	= #{relationField}		 </if>
				<if test="career != null and career != ''">	, CAREER 	= #{career}		 </if>
				<if test="title != null and title != ''">	, TITLE 	= #{title}		 </if>
				<if test="titlePath != null and titlePath != ''">	, TITLE 	= #{titlePath}		 </if>
				<if test="authGroupId != null and authGroupId != ''">	, AUTH_GROUP_ID 	= #{authGroupId}		 </if>
				<if test="bndlRegYn != null and bndlRegYn != ''">	, BNDL_REG_YN 	= #{bndlRegYn}		 </if>
				<if test="loginCnt != null and loginCnt != ''">	, LOGIN_CNT 	= #{loginCnt}		 </if>
				<if test="scsnYn != null and scsnYn != ''">	, SCSN_YN 	= #{scsnYn}		 </if>
				<if test="majr != null and majr != ''">	, MAJR 	= #{majr}		 </if>
				<if test="receiveMailYn != null and receiveMailYn != ''">	, RECEIVE_MAIL_YN 	= #{receiveMailYn}		 </if>
				<if test="receiveSmsYn != null and receiveSmsYn != ''">	, RECEIVE_SMS_YN 	= #{receiveSmsYn}		 </if>
				<if test="foreignYn != null and foreignYn != ''">	, FOREIGN_YN 	= #{foreignYn}		 </if>
				<if test="namecheckYn != null and namecheckYn != ''">	, NAMECHECK_YN 	= #{namecheckYn}		 </if>
				<if test="nationCode != null and nationCode != ''">	, NATION_CODE 	= #{nationCode}		 </if>
				<if test="companyId != null and companyId != ''">	, COMPANY_ID 	= #{companyId}		 </if>
				<!-- <if test="gPinYn != null and gPinYn != ''">	, G_PIN_YN 	= #{gPinYn}		 </if>
				<if test="gPinKey1 != null and gPinKey1 != ''">	, G_PIN_KEY1 	= #{gPinKey1}		 </if>
				<if test="gPinKey2 != null and gPinKey2 != ''">	, G_PIN_KEY2 	= #{gPinKey2}		 </if> -->
				<if test="memDiv != null and memDiv != ''">	, MEM_DIV 	= #{memDiv}		 </if>
				<if test="schoolSeq != null and schoolSeq != ''">	, SCHOOL_SEQ 	= #{schoolSeq}		 </if>
				<if test="tutorClauseAgreeYn != null and tutorClauseAgreeYn != ''">	, TUTOR_CLAUSE_AGREE_YN 	= #{tutorClauseAgreeYn}		 </if>
				<if test="aspId != null and aspId != ''">	, ASP_ID 	= #{aspId}		 </if>
				<if test="agreeYn != null and agreeYn != ''">	, AGREE_YN 	= #{agreeYn}		 </if>
				<!-- <if test="nonageYn != null and nonageYn != ''">	, NONAGE_YN 	= #{nonageYn}		 </if> -->
				<if test="deleteYn != null and deleteYn != ''">	, DELETE_YN 	= #{deleteYn}		 </if>
				<if test="sessionMemSeq != null and sessionMemSeq != ''">	, UPDATE_USER 	= #{sessionMemSeq}		 </if>
				<!-- <if test="certiNo != null and certiNo != ''">	, CERTI_NO 	= #{certiNo}		 </if> -->
				<!-- <if test="certiCharacter != null and certiCharacter != ''">	, CERTI_CHARACTER 	= #{certiCharacter}		 </if> -->
				<!-- <if test="certiYn != null and certiYn != ''">	, CERTI_YN 	= #{certiYn}		 </if> -->
				<!-- <if test="certiAttemptCnt != null and certiAttemptCnt != ''">	, CERTI_ATTEMPT_CNT 	= #{certiAttemptCnt}		 </if> -->
				<if test="compNm != null and compNm != ''">	, COMP_NM 	= #{compNm}		 </if>
				<if test="deptNo != null and deptNo != ''">	, DEPT_NO 	= #{deptNo}		 </if>
				<if test="deptNm != null and deptNm != ''">	, DEPT_NM 	= #{deptNm}		 </if>
				
				<if test="compLicenceCd != null and compLicenceCd != ''">	, COMP_LICENCE_CD 	= #{compLicenceCd}		 </if>
				<if test="compJoinDay != null and compJoinDay != ''">	, COMP_JOIN_DAY 	= #{compJoinDay}		 </if>
				<if test="compTelNo != null and compTelNo != ''">	, COMP_TEL_NO 	= #{compTelNo}		 </if>
				<if test="atchFileId != null and atchFileId != ''">	, ATCH_FILE_ID 	= #{atchFileId}		 </if>
				<if test="hpNo != null and hpNo != ''">	, HP_NO 	= #{hpNo}		 </if>
				
				 <if test="dutyNm != null and dutyNm != ''">	, DUTY_NM 	= #{dutyNm}		 </if>
				 
				 <if test="compStatusCd != null and compStatusCd != ''">	, COMP_STATUS_CD 	= #{compStatusCd}		 </if>
				 <if test="compCareerYear != null and compCareerYear != ''">	, COMP_CAREER_YEAR 	= #{compCareerYear}		 </if>
				 <if test="compEduLevelCd != null and compEduLevelCd != ''">	, COMP_EDU_LEVEL_CD 	= #{compEduLevelCd}		 </if>
				 <if test="compLicenceNm != null and compLicenceNm != ''">	, COMP_LICENCE_NM 	= #{compLicenceNm}		 </if>
				 
				<!-- <if test="remk != null and remk != ''">	, REMK 	= #{remk}		 </if> -->
				<!-- <if test="wrongRegiNo != null and wrongRegiNo != ''">	, WRONG_REGI_NO 	= #{wrongRegiNo}		 </if>
				<if test="orgPwNull != null and orgPwNull != ''">	, ORG_PW_NULL 	= #{orgPwNull}		 </if>
				<if test="orgMemId != null and orgMemId != ''">	, ORG_MEM_ID 	= #{orgMemId}		 </if> 
				<if test="lastLoginYmd != null and lastLoginYmd != ''">	, LAST_LOGIN_YMD 	= #{lastLoginYmd}		 </if>
				<if test="lastPwUpdtYmd != null and lastPwUpdtYmd != ''">	, LAST_PW_UPDT_YMD 	= #{lastPwUpdtYmd}		 </if>
				<if test="pwErrNumberTimes != null and pwErrNumberTimes != ''">	, PW_ERR_NUMBER_TIMES 	= #{pwErrNumberTimes}		 </if>
				<if test="useExpireYmd != null and useExpireYmd != ''">	, USE_EXPIRE_YMD 	= #{useExpireYmd}		 </if> -->
		     WHERE MEM_SEQ 	= #{memSeq}
	</update>
	
	
	
	<update id="updateCcnStdMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.updateCcnStdMember ====== */
			UPDATE COM_MEMBER 
	        SET UPDATE_DATE 	= SYSDATE,
		      	STD_COMP_TEL_NO = #{stdCompTelNo},
				STD_GOYONG_DATE = #{stdGoyongDate},
				STD_STATUS = #{stdStatus},
				STD_COMP_OUT_DATE = #{stdCompOutDate},
				STD_LEAVE_DATE = #{stdLeaveDate},
				OUT_EVAL_NCS_NAME = #{outEvalNcsName},
				OUT_EVAL_NCS_TIME = #{outEvalNcsTime},
				OUT_EVAL_PASS_YN = #{outEvalPassYn},
				OUT_EVAL_PASS_DATE = #{outEvalPassDate},
				DUTY_NM = #{dutyNm},
				OUT_EVAL_NCS_YN = #{outEvalNcsYn},
				OUT_EVAL_PROGRESS_YN = #{outEvalProgressYn},
				TRANING_PROCESS_ID = #{traningProcessId},
				STD_TRANING_YEAR = #{stdTraningYear},
				COMPANY_ID = #{companyId}
			WHERE MEM_SEQ 	= #{memSeq}
	</update>
	
	
	<update id="updateMemberAdm" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.updateMemberAdm ====== */
			UPDATE COM_MEMBER 
	        SET UPDATE_DATE 	= SYSDATE,
	        MEM_ID 	= #{memId},
	        MEM_TYPE 	= #{memType},
			WHERE MEM_SEQ 	= #{memSeq}
	</update>


	<update id="updateMemberExpireYmd"  parameterType="java.util.HashMap"  >
	/* ====== kr.co.gocle.oklms.la.member.service.impl.UserActMapper."updateMemberExpireYmd" ========= */	    
		UPDATE COM_MEMBER
		SET 
			  USE_EXPIRE_YMD = SYSDATE + #{loginPWMaxUsedDays}
		WHERE MEM_SEQ 	= #{memSeq}
 	</update>

	<update id="updateMemberLastLoginDt"  parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO"  >
	/* ====== kr.co.gocle.oklms.la.member.service.impl.UserActMapper.updateMemberLastLoginDt ========= */	    
		UPDATE COM_MEMBER
		SET 
			  LAST_LOGIN_YMD = SYSDATE 
			  , PW_ERR_NUMBER_TIMES = 0
		WHERE MEM_SEQ 	= #{memSeq}
 	</update>
 	
	<update id="updateMemberPwFailCnt"  parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO"  >
	/* ====== kr.co.gocle.oklms.la.member.service.impl.UserActMapper.updateMemberPwFailCnt ========= */	    
		UPDATE COM_MEMBER
		SET 
			  UPDATE_DATE = SYSDATE 
			  , UPDATE_USER = NVL(#{sessionMemSeq} , '2009USER0000001') 
			  , PW_ERR_NUMBER_TIMES = PW_ERR_NUMBER_TIMES + 1
		WHERE MEM_SEQ 	= #{memSeq}
 	</update>
 	
	<update id="updateMemberPwInit"  parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO"  >
	/* ====== kr.co.gocle.oklms.la.member.service.impl.UserActMapper.updateMemberPwInit ========= */	    
		UPDATE COM_MEMBER
		SET 
			  UPDATE_DATE = SYSDATE 
			  , UPDATE_USER = NVL(#{sessionMemSeq} , '2009USER0000001')
			  , PW_ERR_NUMBER_TIMES = 0												/* ====== 비밀번호 초기화시 에러 횟수 제어 ====== */
			  , MEM_PASSWORD 	= #{encryptShaPwDefault}
			  , LAST_PW_UPDT_YMD = SYSDATE + #{loginPWMaxUsedDays}	/* ====== 최종 비밀번호 변경 일자  ====== */
		WHERE MEM_SEQ 	= #{memSeq}
 	</update>
 	
 	<update id="updateMemberPw"  parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO"  >
	/* ====== kr.co.gocle.oklms.la.member.service.impl.UserActMapper.updateMemberPw ========= */	    
		UPDATE COM_MEMBER
		SET 
			  UPDATE_DATE = SYSDATE 
			  , UPDATE_USER = NVL(#{sessionMemSeq} , '2009USER0000001')
			  , PW_ERR_NUMBER_TIMES = 0
<!-- 			  , MEM_PASSWORD 	= rawtohex(DBMS_CRYPTO.Hash(to_clob(to_char(#{memPasswordEncript})),3)) -->
			  , MEM_PASSWORD 	=  #{memPasswordEncript}<!-- HEX(AES_ENCRYPT(#{memPasswordEncript},#{memPasswordEncript})) -->
			  , LAST_PW_UPDT_YMD = SYSDATE						/* ====== 최종 비밀번호 변경 일자  ====== */
		WHERE MEM_SEQ 	= #{memSeq}
 	</update>
 	
 	
 	<select id="getMemberSeq" parameterType="String" resultType="String">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getMemberSeq ====== */
	        SELECT
	               MEM_SEQ
	          FROM COM_MEMBER 
	          WHERE MEM_ID = #{memId}
	</select>
	
	<select id="getCompanyName" parameterType="String" resultType="String">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getCompanyName ====== */
	        SELECT
	               COMPANY_ID
	          FROM LMS_COMPANY 
	          WHERE COMPANY_NAME = #{companyName}
	</select>
	
	 <delete id="deleteMember"  parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO"  >
		/* ====== kr.co.gocle.oklms.la.member.service.impl.UserActMapper.deleteMember ========= */	    
		UPDATE COM_MEMBER
		SET 
			  UPDATE_DATE = SYSDATE 
			  , UPDATE_USER = NVL(#{sessionMemSeq} , '2009USER0000001')
			  , DELETE_YN = 'Y'
			  , SCSN_YN = 'Y'
		WHERE MEM_SEQ 	= #{memSeq}
 	</delete>

	<delete id="deleteMemberList" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		<![CDATA[
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.deleteMemberList ====== */
			UPDATE COM_MEMBER
			SET  UPDATE_DATE = SYSDATE 
				  , UPDATE_USER = NVL(#{sessionMemSeq} , '2009USER0000001')
				  , DELETE_YN = 'Y'
				  , SCSN_YN = 'Y'
		]]>
			 WHERE MEM_SEQ IN
		<foreach collection="memSeqs" item="delMemSeqIds" index="index" open="(" close=")" separator=",">
			 '${delMemSeqIds}'
		</foreach>
	</delete>
	
	
	<select id="listStdMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.listStdMember ====== */
			   
			   
			  SELECT * FROM ( 
				   SELECT CM.MEM_SEQ
						, CM.MEM_ID
						, CM.MEM_TYPE
						, CM.MEM_NAME
						, CM.PWD_QUEST
						, CM.SEX
						, CM.MEM_NAME_ENG
						, CM.MEM_BIRTH
						, CM.PWD_QUEST_ANS
						, CM.MEM_PASSWORD
			        	, CM.EMAIL
						, CM.MEM_REGI_NO
						, CM.ZIP_CODE
						, CM.ADDRESS
						, CM.ADDRESS_DTL
						, CM.TEL_NO1
						, CM.TEL_NO2
						, CM.TEL_NO3
						, CM.HP_NO1
						, CM.HP_NO2
						, CM.HP_NO3
						, CM.HP_NO as hp
						, CM.HP_NO
						, CM.NEWSLETTER_YN
						, CM.PHOTO_FILE_PATH
						, CM.WORKING_PLACE
						, CM.SCHOLARSHIP
						, CM.SECEDE_REASON
						, CM.RELATION_FIELD
						, CM.CAREER
						, CM.TITLE
						, CM.AUTH_GROUP_ID
						, CM.BNDL_REG_YN
	<!-- 					, CM.LOGIN_CNT -->
						, CM.SCSN_YN
						, CM.MAJR
						, CM.RECEIVE_MAIL_YN
						, CM.RECEIVE_SMS_YN
						, CM.FOREIGN_YN
						, CM.NAMECHECK_YN
						, CM.NATION_CODE
						, CM.COMPANY_ID
						, CM.G_PIN_YN
						, CM.G_PIN_KEY1
						, CM.G_PIN_KEY2
						, CM.MEM_DIV
						, CM.SCHOOL_SEQ
						, CM.TUTOR_CLAUSE_AGREE_YN
						, CM.ASP_ID
						, CM.AGREE_YN
						, CM.NONAGE_YN
						, CM.DELETE_YN
	<!-- 					, CM.INSERT_DATE -->
						, CM.INSERT_USER
						, CM.UPDATE_DATE
						, CM.UPDATE_USER
						, CM.CERTI_NO
						, CM.CERTI_CHARACTER
						, CM.CERTI_YN
						, CM.CERTI_ATTEMPT_CNT
						, CM.COMP_NM
						, CM.DEPT_NM
						, CM.DUTY_NM
						, CM.REMK
						, CM.WRONG_REGI_NO
						, CM.ORG_PW_NULL
						, CM.ORG_MEM_ID
						, CM.LAST_LOGIN_YMD
						, CM.LAST_PW_UPDT_YMD
						, CM.PW_ERR_NUMBER_TIMES
						, CM.USE_EXPIRE_YMD
						, TO_CHAR(CM.INSERT_DATE, 'YYYY.MM.DD') INSERT_DATE 
						, '' SCHOOL_NAME
						, '' INSTITUTE_NAME
						, '' POSITION 
						, '' CERTIFICATION_DIV 
						, CM.ETC_GRADE1
						, CM.ETC_GRADE2
						, CM.ETC_GRADE3
						, CM.BIGO1
						, CM.BIGO2
						, (SELECT COMPANY_NAME FROM LMS_COMPANY WHERE DELETE_YN = 'N' AND COMPANY_ID = CM.COMPANY_ID ) AS COMPANY_NAME  
				        , (SELECT MAX(SUB.CLASS) FROM LMS_LESSON LES 
				          INNER JOIN LMS_SUBJECT SUB 
				              ON LES.YYYY = SUB.YYYY 
				              AND LES.TERM = SUB.TERM 
				              AND LES.SUBJECT_CODE = SUB.SUBJECT_CODE 
				              AND LES.CLASS = SUB.CLASS 
				              AND SUB.SUBJECT_TRANING_TYPE = 'OJT' 
				        WHERE LES.MEM_SEQ = CM.MEM_SEQ 
				        	AND ROWNUM = 1
				       ) AS SUBJECT_CLASS 
				       , SUBSTR(FN_GETUSERID(CM.MEM_SEQ),1,4) AS SCHOOL_YEAR
				       , CP.ADDRESS AS COMP_ADDRESS
				       , CP.ADDRESS_DTL AS COMP_ADDRESS_DTL
				       
					 FROM COM_MEMBER CM
					 
					 INNER JOIN LMS_TRANING_PROCESS_SEARCH PS
					 ON PS.TRANING_PROCESS_ID = CM.TRANING_PROCESS_ID
					 
					 AND PS.DELETE_YN = 'N'
					 <if test="searchSchoolYear != null and searchSchoolYear != ''">   
			   			AND PS.YEAR = #{searchSchoolYear} 
			  		</if>
					 
					 LEFT OUTER JOIN LMS_COMPANY CP
					 ON CP.COMPANY_ID = CM.COMPANY_ID
				 	WHERE 1=1 
				 	AND CM.DELETE_YN = 'N'
					AND CM.MEM_TYPE = 'STD'
					AND CM.OUT_YN = 'N'
					AND CM.PASS_YN = 'N'
				
					
				<if test="sessionMemType == 'CCN' and sessionMemType != null and sessionMemType != ''">   
				   		AND (CM.COMPANY_ID) IN
											(
												SELECT CCN.COMPANY_ID
								                FROM LMS_COMP_CCN_MAPPING CCN 
								                     WHERE CCN.DELETE_YN = 'N' 
								                     AND CCN.MEM_SEQ = #{sessionMemSeq} 
											)		
				  </if>
				  
				  <if test="sessionMemType == 'PRT' and sessionMemType != null and sessionMemType != ''">   
				   		
				   		<choose>
				            <when test='ojtYn == "Y" and ojtYn != null and ojtYn != ""'>
				                	AND (CM.MEM_SEQ) IN
											(
												SELECT A.MEM_SEQ 
												  FROM LMS_LESSON A
												  	INNER JOIN LMS_SUBJECT B
												  		ON A.YYYY = B.YYYY
												          AND A.TERM = B.TERM
												          AND A.SUBJECT_CODE = B.SUBJECT_CODE
												          AND A.CLASS = B.CLASS
												          AND B.SUBJECT_TRANING_TYPE = 'OJT'
													 WHERE (
													           A.YYYY,
													           A.TERM,
													           A.SUBJECT_CODE,
													           A.CLASS
													       ) 
													       IN 
													       (SELECT YYYY,
													              TERM,
													              SUBJECT_CODE,
													              CLASS 
													         FROM LMS_SUBJ_INS_MAPPING 
													        WHERE MEM_SEQ = #{sessionMemSeq}  
													       )
											)	
				            </when>
				            <otherwise>
				            		
				            		AND (CM.MEM_SEQ) IN
											(
												SELECT MEM_SEQ 
												  FROM LMS_LESSON 
												 WHERE (
												           YYYY,
												           TERM,
												           SUBJECT_CODE,
												           CLASS
												       ) 
												       IN 
												       (SELECT YYYY,
												              TERM,
												              SUBJECT_CODE,
												              CLASS 
												         FROM LMS_SUBJ_INS_MAPPING 
												        WHERE MEM_SEQ = #{sessionMemSeq}  
												       )
											)	
				            		
				            </otherwise>
				   		</choose>
				   			
				   </if>
				   
				   <if test="sessionMemType == 'CDP' and sessionMemType != null and sessionMemType != ''">   
				   		AND CM.DEPT_NO IN (
				   			SELECT DEPT_NO FROM LMS_DEPT_CDP_MAPPING WHERE MEM_SEQ = #{sessionMemSeq} 
				   		) 
				   </if>
			   
			) CM
			WHERE 1=1
				
			
			<choose>
	            <when test="searchName != null and searchName != ''">
	                	<if test="searchName eq 'NAME'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.MEM_NAME LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	                	<if test="searchName eq 'ID'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.MEM_ID LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	                	<if test="searchName eq 'COMPANY_NAME'">
	                		<if test="searchWord != null and searchWord != ''">
	                			AND CM.COMPANY_NAME LIKE '%' || #{searchWord  } || '%'
	                		</if>
	                	</if>
	            </when>
	            <otherwise>
	            	<if test="searchWord != null and searchWord != ''">
	            		AND ( CM.MEM_NAME LIKE '%' || #{searchWord  } || '%' OR CM.MEM_ID LIKE '%' || #{searchWord  } || '%' OR CM.COMPANY_NAME LIKE '%' || #{searchWord  } || '%' )
	            	</if>
	            </otherwise>
	        </choose>
	        
	       
	        
	        
        
			ORDER BY CM.MEM_ID DESC
	</select>
	
	<update id="updateStdMember" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.updateStdMember ====== */
			UPDATE COM_MEMBER CM
			SET  CM.UPDATE_DATE = SYSDATE 
				  , CM.UPDATE_USER = #{sessionMemSeq}
				  <if test="sessionMemType == 'PRT' and sessionMemType != null and sessionMemType != ''">   
				  , CM.ETC_GRADE1 = #{etcGrade1}
				  , CM.ETC_GRADE2 = #{etcGrade2}
				  , CM.ETC_GRADE3 = #{etcGrade3}
				  , CM.BIGO1 = #{bigo1}
				  </if>
				  <if test="sessionMemType == 'CCN' and sessionMemType != null and sessionMemType != ''">   
				  , CM.BIGO2 = #{bigo2}
				  </if>
			 WHERE CM.MEM_SEQ = #{memSeq}
	</update>

 
 	
 	
 	<select id="getOjtPrtCnt" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="java.lang.Integer">
	
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.getOjtPrtCnt ====== */
	        SELECT
	               COUNT(*) CNT
	          FROM LMS_SUBJECT A
	          INNER JOIN LMS_SUBJ_INS_MAPPING B
	          ON A.YYYY = B.YYYY
		          AND A.TERM = B.TERM
		          AND A.SUBJECT_CODE = B.SUBJECT_CODE
		          AND A.CLASS = B.CLASS
		          AND B.DELETE_YN = 'N'
		          AND B.MEM_SEQ = #{sessionMemSeq}
	          WHERE A.DELETE_YN = 'N'
	          	AND A.SUBJECT_TRANING_TYPE = 'OJT'
	    </select>
 
	<select id="listCotMemberStat" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.listCotMemberStat ====== */
		<include refid="kr.co.gocle.include.paging-start"/>
		SELECT 
					CM.MEM_NAME 
					,LC.COMPANY_NAME
					,CM.MEM_TYPE
					,CM.DUTY_NM AS TITLE
					,CM.COMP_JOIN_DAY
					,(SELECT DISTINCT LISTAGG(FN_GETUSERNAME(CCM.MEM_SEQ), ',') WITHIN 
											              GROUP( 
											            ORDER BY FN_GETUSERNAME(CCM.MEM_SEQ)) 
									                FROM LMS_TRANING_PROCESS PRO
									                   INNER JOIN LMS_SUBJ_CCM_MAPPING CCM
									                       ON CCM.COMPANY_ID = PRO.COMPANY_ID
									                     AND CCM.TRANING_PROCESS_ID = PRO.TRANING_PROCESS_ID
									                     AND CCM.DELETE_YN = 'N'
									               WHERE PRO.DELETE_YN = 'N'
									                     AND PRO.COMPANY_ID = CM.COMPANY_ID
									              ) AS HRD_NAMES
					,CM.COMP_LICENCE_CD
					,CM.ATCH_FILE_ID
					,CM.COMP_STATUS_CD
					,CM.COMP_CAREER_YEAR
					,CM.COMP_EDU_LEVEL_CD
					,CM.COMP_LICENCE_NM
					,CM.COMP_TEL_NO
					,CM.HP_NO
					,CM.EMAIL
					FROM COM_MEMBER CM 
					LEFT OUTER JOIN LMS_COMPANY LC ON LC.COMPANY_ID = CM.COMPANY_ID AND LC.DELETE_YN='N'
					
					WHERE CM.MEM_TYPE IN ('COT','CCM') AND CM.SCSN_YN='N'
				<if test="searchCondition == 'name'  and searchKeyword != null and searchKeyword != ''">
					AND CM.MEM_NAME LIKE '%' || #{searchKeyword} || '%' 
				</if>
				<if test="searchCondition == 'comp'  and searchKeyword != null and searchKeyword != ''">
					AND LC.COMPANY_NAME LIKE  '%' || #{searchKeyword} || '%'
				</if>
				ORDER BY LC.COMPANY_ID
				<include refid="kr.co.gocle.include.paging-end"/>
				 
	</select>
	<select id="listStudyMemberStat" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO" resultType="kr.co.gocle.oklms.la.member.vo.MemberVO">
		/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.listStudyMemberStat ====== */
		<include refid="kr.co.gocle.include.paging-start"/>
				SELECT   CM.MEM_SEQ,
					         CM.MEM_NAME,
					         CD.DEPT_NAME AS DEPT_NM,
					         CM.MEM_ID,
					         CM.MEM_BIRTH,
					         CM.STD_COMP_TEL_NO,
					         CM.HP_NO1,
					         CM.HP_NO2,
					         CM.HP_NO3,
					         CM.EMAIL,
					         CM.STD_GOYONG_DATE,
					         CM.STD_TRANSFER_YN ,
					         CM.STD_STATUS ,
					         CM.STD_HAK_STATUS ,
					         CM.STD_COMP_OUT_DATE ,
					         CM.STD_LEAVE_DATE ,
					         CM.OUT_EVAL_NCS_NAME ,
					         CM.OUT_EVAL_NCS_TIME ,
					         CM.OUT_EVAL_PASS_YN ,
					         CM.OUT_EVAL_PASS_DATE ,
					         CM.STD_COMPL_DATE ,
					         CM.OUT_EVAL_NCS_YN ,
					         CM.OUT_EVAL_PROGRESS_YN ,
					         LTP.COMPANY_ID,
					         LTPS.TRANING_PROCESS_NAME,
					         LTPS.TRANING_PROCESS_NO ,
					         LTPS.TRANING_PROCESS_ID,
					         LTPS.TRANING_TYPE_CD,
					         LTPS.TRANING_PROCESS_PERIOD,
					         LTPS.YEAR,
					         LTP.OJT_CLASS AS OJT_CLASS,
					         LTPS.START_DATE,
					         LTPS.END_DATE,
					         '' AS INS_NAMES ,
					         (SELECT  LISTAGG(FN_GETUSERNAME(CCM.MEM_SEQ), ',') WITHIN GROUP( ORDER BY FN_GETUSERNAME(CCM.MEM_SEQ))
					         FROM     LMS_COMP_CCN_MAPPING CCM
					         WHERE    CCM.COMPANY_ID = LTP.COMPANY_ID
					         AND      CCM.DELETE_YN  ='N'
					         )
					         AS CCN_NAMES ,
					         LTPS.TRANING_STATUS_CD ,
					         LC.COMPANY_NAME ,
					         LTPS.NCS_LICENCE_NAME ,
					         LTPS.NCS_LICENCE_LEVEL ,
					         LTPS.NCS_LICENCE_VERSION ,
					         LTPS.NCS_CODE ,
					         LTPS.NCS_NAME ,
					         LTPS.CENTER_GRADE ,
					         LTPS.CENTER_BIGO ,
					         LTPS.OJT_TIME_HOUR ,
					         LTPS.OFF_TIME_HOUR ,
					         LTP.NOTE_MONTH ,
					         LTP.ACT_MONTH ,
					         LTP.PROCESS_STATUS ,
					         LTP.OJT_MONTH_BIYONG ,
					         LTP.OFF_MONTH_BIYONG ,
					         LTP.CCN_MONTH ,
					         LTP.CCN_GRADE ,
					         LTP.CCN_BIGO ,
					         LTP.PRT_GRADE ,
					         LTP.PRT_BIGO,
					         SK.GRAD_DT,
		         			 SK.EXT_DT ,
		        			 SK.SKNRGS_STTUS_NM,
					         (SELECT COUNT(*)
					         FROM    LMS_LESSON LES
					         WHERE   LES.MEM_SEQ = CM.MEM_SEQ
					         AND
					                 (
					                         YYYY,TERM,SUBJECT_CODE,CLASS
					                 )
					                 IN
					                 (SELECT YYYY,
					                         TERM,
					                         SUBJECT_CODE,
					                         CLASS
					                 FROM    LMS_SUBJECT
					                 WHERE   SUBJECT_TRANING_TYPE = 'OFF'
					                 )
					         )
					         OFF_GOAL,
					         ( SELECT COUNT(*)
					         FROM    KUT_HAK.VH_OKLMS_TH_SCRE_CSTDY_SCRE SCR
					         WHERE   SCR.STUDNO = CM.MEM_ID
					         AND
					                 (
					                         SCR.GRAD_CD = 'P' OR SUBSTR(SCR.GRAD_CD,0,1) = 'A' OR SUBSTR(SCR.GRAD_CD,0,1) = 'B' OR SUBSTR(SCR.GRAD_CD,0,1) = 'C'
					                 )
					         AND
					                 (
					                         SCR.COURSE_NO
					                 )
					                 IN
					                 ( SELECT SUBJECT_CODE
					                 FROM    LMS_SUBJECT
					                 WHERE   SUBJECT_TRANING_TYPE = 'OFF'
					                 )
					         )
					         OFF_COMPL,
					         (SELECT COUNT(*)
					         FROM    LMS_LESSON LES
					         WHERE   LES.MEM_SEQ = CM.MEM_SEQ
					         AND
					                 (
					                         YYYY,TERM,SUBJECT_CODE,CLASS
					                 )
					                 IN
					                 ( SELECT YYYY,
					                         TERM,
					                         SUBJECT_CODE,
					                         CLASS
					                 FROM    LMS_SUBJECT
					                 WHERE   SUBJECT_TRANING_TYPE = 'OJT'
					                 )
					         )
					         OJT_GOAL,
					         (SELECT COUNT(*)
					         FROM    KUT_HAK.VH_OKLMS_TH_SCRE_CSTDY_SCRE SCR
					         WHERE   SCR.STUDNO  = CM.MEM_ID
					         AND     SCR.GRAD_CD = 'S'
					         AND
					                 (
					                         COURSE_NO
					                 )
					                 IN
					                 ( SELECT SUBJECT_CODE
					                 FROM    LMS_SUBJECT
					                 WHERE   SUBJECT_TRANING_TYPE = 'OJT'
					                 )
					         )
					         OJT_COMPL,
					         (SELECT COUNT(*)
					         FROM    ( SELECT  STUD_ID,
					                          YR,
					                          SEMSTR_CD,
					                          YY_SEMSTR_NM,
					                          CORS_CD,
					                          CORS_NM,
					                          CLS_NO,
					                          CAPA_NM,
					                          CAPA_FID
					                 FROM     KUT_MOB2.VH_OKLMS_LCTRE_COMPL_STAT
					                 GROUP BY STUD_ID,
					                          YR,
					                          SEMSTR_CD,
					                          YY_SEMSTR_NM,
					                          CORS_CD,
					                          CORS_NM,
					                          CLS_NO,
					                          CAPA_NM,
					                          CAPA_FID
					                 )
					                 A ,
					                 ( SELECT MEM_ID
					                 FROM    COM_MEMBER
					                 WHERE   MEM_TYPE = 'STD'
					                 )
					                 B
					         WHERE   B.MEM_ID = CM.MEM_ID
					         AND     B.MEM_ID = A.STUD_ID
					         )
					         NCS_GOAL,
					         (SELECT COUNT(*)
					         FROM    ( SELECT  STUD_ID,
					                          YR,
					                          SEMSTR_CD,
					                          YY_SEMSTR_NM,
					                          CORS_CD,
					                          CORS_NM,
					                          CLS_NO,
					                          CAPA_NM,
					                          CAPA_FID
					                 FROM     KUT_MOB2.VH_OKLMS_LCTRE_COMPL_STAT
					                 WHERE    ACHV_YN = 'P'
					                 GROUP BY STUD_ID,
					                          YR,
					                          SEMSTR_CD,
					                          YY_SEMSTR_NM,
					                          CORS_CD,
					                          CORS_NM,
					                          CLS_NO,
					                          CAPA_NM,
					                          CAPA_FID
					                 )
					                 A,
					                 ( SELECT MEM_ID
					                 FROM    COM_MEMBER
					                 WHERE   MEM_TYPE = 'STD'
					                 )
					                 B
					         WHERE   B.MEM_ID = CM.MEM_ID
					         AND     B.MEM_ID = A.STUD_ID
					         )
					         NCS_COMPL 
					FROM     COM_MEMBER CM
					         LEFT OUTER JOIN LMS_COMPANY LC
					         ON       LC.COMPANY_ID = CM.COMPANY_ID
					         AND      LC.DELETE_YN  ='N'
					         LEFT OUTER JOIN LMS_TRANING_PROCESS LTP
					         ON       LTP.TRANING_PROCESS_ID = CM.TRANING_PROCESS_ID
					         AND      LTP.COMPANY_ID         = CM.COMPANY_ID
					         AND      LTP.DELETE_YN          = 'N'
					         LEFT OUTER JOIN LMS_TRANING_PROCESS_SEARCH LTPS
					         ON       LTPS.TRANING_PROCESS_ID = CM.TRANING_PROCESS_ID
					         AND      LTPS.DELETE_YN         ='N'
					         LEFT OUTER JOIN KUT_MOB2.VH_OKLMS_TH_SKNRGS_M SK
         					 ON       SK.STUDNO = CM.MEM_ID
					         INNER JOIN COM_DEPT CD
					         ON       CM.DEPT_NO = CD.DEPT_CD
					WHERE    1                   =1
					AND CM.MEM_TYPE = 'STD'
					AND CM.DELETE_YN = 'N'

				<if test="searchMemName != null and searchMemName != ''">
					AND CM.MEM_NAME LIKE '%' || #{searchMemName} || '%' 
				</if>
				<if test="searchMemId != null and searchMemId != ''">
					AND CM.MEM_ID LIKE '%' || #{searchMemId} || '%' 
				</if>
				<if test="searchDeptNm != null and searchDeptNm != ''">
					AND CD.DEPT_NAME LIKE '%' || #{searchDeptNm} || '%' 
				</if>
				ORDER BY CM.MEM_ID DESC		
			<include refid="kr.co.gocle.include.paging-end"/>
				 
	</select>
	
	
	<update id="updateTraningStatus" parameterType="kr.co.gocle.oklms.la.member.vo.MemberVO">
			/* ====== kr.co.gocle.oklms.la.member.service.impl.MemberMapper.updateCcnStdMember ====== */
			UPDATE LMS_TRANING_PROCESS_SEARCH TR 
			       SET TRANING_STATUS_CD = 
			       (SELECT 
			              CASE 
			                  WHEN 
			                      (SELECT COUNT(1) 
			                        FROM COM_MEMBER B 
			                       WHERE 
			                             ( 
			                                 STD_STATUS = '1' 
			                                 OR STD_STATUS = '5' 
			                             ) 
			                             AND B.TRANING_PROCESS_ID = A.TRANING_PROCESS_ID 
			                      ) > 0 
			                  THEN '1' 
			                  WHEN 
			                      (SELECT COUNT(1) 
			                        FROM COM_MEMBER B 
			                       WHERE STD_STATUS = '4' 
			                             AND B.TRANING_PROCESS_ID = A.TRANING_PROCESS_ID 
			                      ) = COUNT(A.TRANING_PROCESS_ID) 
			                  THEN '2' 
			                  WHEN 
			                      (SELECT COUNT(1) 
			                        FROM COM_MEMBER B 
			                       WHERE STD_STATUS = '5' 
			                             AND B.TRANING_PROCESS_ID = A.TRANING_PROCESS_ID 
			                      ) = COUNT(A.TRANING_PROCESS_ID) 
			                  THEN '3' 
			                  WHEN 
			                      (SELECT COUNT(1) 
			                        FROM COM_MEMBER B 
			                       WHERE STD_STATUS IN( '2','3','6') 
			                             AND B.TRANING_PROCESS_ID = A.TRANING_PROCESS_ID 
			                             AND TO_CHAR(SYSDATE,'YYYY.MM.DD') > A.END_DATE 
			                      ) > 0 
			                  THEN '4' 
			                  ELSE A.TRANING_STATUS_CD 
			              END TRANING_STATUS_CD 
			         FROM LMS_TRANING_PROCESS_SEARCH A 
			        WHERE A.DELETE_YN = 'N' 
			              AND A.TRANING_PROCESS_ID = #{traningProcessId}
			        GROUP BY A.TRANING_PROCESS_ID, 
			              A.TRANING_STATUS_CD, 
			              A.END_DATE  
			       ) 
			 WHERE TR.TRANING_PROCESS_ID = #{traningProcessId}
	</update>
	
</mapper>
